ORACLE RAC 启用归档
 
1、关闭所有节点数据库实例
c:>srvctl stop database -d RACDB
 
2、修改服务器配置参数
sql>startup mount
sql>alter system set cluster_database=false scope=spfile;
sql>shutdown immediate
 
3、调整归档日志路径
sql>startup mount
sql>alter system set log_archive_dest_1='LOCATION=+RAC_DISK' scope=spfile sid='RACDB1';
sql>alter system set log_archive_dest_1='LOCATION=+RAC_DISK' scope=spfile sid='RACDB2';
 
调整归档日志文件命名方式
sql>alter system set log_archive_format ='arch1_%s_%R_%T.arc' scope=spfile sid='RACDB1';
sql>alter system set log_archive_format ='arch2_%s_%R_%T.arc' scope=spfile sid='RACDB2';
 
4、开启归档日志
sql>alter database archivelog
sql>alter database open
 
5、恢复服务器配置参数
sql>alter system set cluster_database=true scope=spfile;
sql>shutdown immediate;
 
6、打开所有节点数据库实例
c:>srvctl start database -d RACDB
 
7、检查归档日志是否已启用
c:>sqlplus / as sysdba;
sql>archive log list;
 
说明：
其中2~5、7是在单节点下操作的