Web 监控的配置：
自动创建的items在host的items列表中是看不到的，需要在创建trigger时选择items时才能看到。


默认 MySQL 监控的配置：
在配置文件 /etc/zabbix/zabbix_agentd.conf 增加：
UserParameter=mysql.ping,mysqladmin -uroot -pstm123 ping | grep alive | wc -l | tr -d " "
UserParameter=mysql.uptime,mysqladmin -uroot -pstm123 status | cut -f2 -d":" | cut -f1 -d"T" | tr -d " "
UserParameter=mysql.threads,mysqladmin -uroot -pstm123 status | cut -f3 -d":" | cut -f1 -d"Q" | tr -d " "
UserParameter=mysql.questions,mysqladmin -uroot -pstm123 status | cut -f4 -d":" | cut -f1 -d"S" | tr -d " "
UserParameter=mysql.slowqueries,mysqladmin -uroot -pstm123 status | cut -f5 -d":" | cut -f1 -d"O" | tr -d " "
UserParameter=mysql.qps,mysqladmin -uroot -pstm123 status | cut -f9 -d":" | tr -d " "
UserParameter=mysql.version,mysql -V

重启 zabbix_agentd :
sudo /etc/init.d/zabbix-agentd restart

较为全面的 MySQL 监控： http://www.zabbix.com/wiki/howto/monitor/db/mysql/extensive_mysql_monitoring_including_replication
vi mysql.php
最后一行加入： ?>
关闭调试模式：
define('DEBUG',false);


Memcached 的监控： http://addmoremem.blogspot.com/2010/10/zabbixs-template-to-monitor-memcached.html
UserParameter=memcached_stats[*],echo -e "stats\nquit" | nc 127.0.0.1 $1 | grep "STAT $2 " | awk '{print $$3}'

/usr/local/zabbix/bin/zabbix_get -s74.86.110.138 -p10050 -k"memcached_stats[*]"


Nginx 的监控： http://www.zabbix.com/forum/showthread.php?t=11067
vi /etc/zabbix/nginx_status.sh
#!/bin/bash
# Script to fetch nginx statuses for tribily monitoring systems

# Set Variables
HOST=127.0.0.1
PORT=80
URI=/nginx_status

# Functions to return nginx stats

function active {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| grep 'Active' | awk '{print $NF}'        
         }      

function reading {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| grep 'Reading' | awk '{print $2}'        
         }      

function writing {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| grep 'Writing' | awk '{print $4}'        
         }      

function waiting {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| grep 'Waiting' | awk '{print $6}'        
         }      

function accepts {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| awk NR==3 | awk '{print $1}'
         }      

function handled {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| awk NR==3 | awk '{print $2}'
         }      

function requests {
         /usr/bin/curl "http://$HOST:$PORT$URI" 2>/dev/null| awk NR==3 | awk '{print $3}'
         }

# Run the requested function
$1

chmod +x /etc/zabbix/nginx_status.sh

vi /etc/zabbix/zabbix_agentd.conf
UserParameter=nginx.accepts,/etc/zabbix/nginx_status.sh accepts
UserParameter=nginx.handled,/etc/zabbix/nginx_status.sh handled
UserParameter=nginx.requests,/etc/zabbix/nginx_status.sh requests
UserParameter=nginx.connections.active,/etc/zabbix/nginx_status.sh active
UserParameter=nginx.connections.reading,/etc/zabbix/nginx_status.sh reading
UserParameter=nginx.connections.writing,/etc/zabbix/nginx_status.sh writing
UserParameter=nginx.connections.waiting,/etc/zabbix/nginx_status.sh waiting

/etc/init.d/zabbix_agentd restart

/usr/local/zabbix/bin/zabbix_get -s<zabbix agent host> -p10050 -k"nginx.accepts"


不能发现 item ，日志文件出现： No active checks on server
zabbix_agentd.conf 文件里 Hostname 的设置要和 Web Interface 里的 主机名 一致。