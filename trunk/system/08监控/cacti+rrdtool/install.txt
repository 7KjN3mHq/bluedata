在被监控端，需要安装 net-snmp
# yum -y install net-snmp
并对 /etc/snmp/snmpd.conf 做如下设置：
1、查找以下字段：
#       sec.name  source          community
com2sec notConfigUser  default       public
将"comunity"字段改为你要设置的密码.比如"public".             
将“default”改为你想哪台机器可以看到你的snmp信息,如192.168.0.100。

2、查找以下字段：
#       group          context sec.model sec.level prefix read   write  notif
access  notConfigGroup ""      any       noauth    exact  systemview none none
将"read"字段改为all.

3、查找以下字段：
#           incl/excl subtree                          mask
#view all    included  .1                               80
将该行前面的"#"去掉.

启动 snmpd:
chkconfig snmpd on
/etc/init.d/snmpd start


在监控端，需要安装 net-snmp-utils 和 rrdtool
# yum -y install net-snmp-utils

# snmpwalk -v 2c 192.168.0.200 -c public .1.3.6.1.4.1.2021.10.1.3

rrdtool 的 rpm 包可以在这里下载：
http://dag.wieers.com/packages/rrdtool/
安装 perl-rrdtool 和 rrdtool
或者：
rpm -Uhv http://apt.sw.be/packages/rpmforge-release/rpmforge-release-0.3.6-1.el4.rf.i386.rpm
yum install rrdtool
具体参考：
http://dag.wieers.com/rpm/FAQ.php#B

在这里下载 cacti ：
http://cacti.net/downloads/

安装：
tar zxvf cacti-0.8.6i.tar.gz
mv cacti-0.8.6i /home/cacti
cd /home/cacti

建立 cacti 的数据库。
# /usr/local/mysql/bin/mysql -uroot -proot cacti < cacti.sql
# chown CR webuser:webgroup rra/ log/

vi include/config.php
$database_type = "mysql";
$database_default = "cacti";
$database_hostname = "localhost";
$database_username = "cactiuser";
$database_password = "cactiuser";
$database_port = "3306";

在浏览器上输入： 
http://IP/cacti 
进入cacti的初始设置页面： 
在这里我们要输入一些原始的信息： 

NEXT －》 
输入一些信息，如rrdtool、php、snmpwalk、snmpget的位置，使用ucd-snmp还是net-snmp等 －》 
输入原始的用户和密码：admin/admin －》 
更改admin用户的密码 －》 
点击 Save 

安装完成。

vi /etc/crontab
*/5 * * * * webuser /usr/local/php/bin/php /data/cacti/poller.php > /dev/null 2>&1

Settings -> RRDTool Utility Version -> RRDTool 1.2.x

apachectl:
unset LANG
LC_ALL=C
export LC_ALL

Current:
Average:
Maximum:

合并数据的功能参考下面的方法： 

You have to create you own graph, but to get multiple hosts, you do not select a host when creating a new graph. 

Click on Console ->; Graph Management, then click on Add in the upper right hand corner. 

Select None and None for Selected Graph Template and Host. Click create. 

Then set your max value and graph title... Click create. 

Now you can start adding graph items. 

You should see all data sources for all hosts. Then you can add any of them you like.



sources:
CPPFLAGS="-I/usr/local/include/libart-2.0" ./configure --prefix=/usr/local/rrdtool --disable-python --disable-tcl

lighttpd:
wget --quiet -O - "http://219.153.35.31:81/server-status" | grep -A 1 "5s sliding average" | grep "Requests" | awk '{print $2}' | sed -e "s/class=\"string\">//g"