groupadd mysql
useradd -g mysql -d /usr/local/mysql -s /sbin/nologin mysql

tar zxvf mysql-4.0.26.tar.gz
cd  mysql-4.0.26
./configure \
--prefix=/usr/local/mysql \
--sysconfdir=/usr/local/mysql/etc \
--with-mysqld-user=mysql \
--with-extra-charsets=all \
--with-charset=gbk
make
make install
cd ..
mkdir /usr/local/mysql/etc
cp -f /usr/local/mysql/share/mysql/my-huge.cnf /usr/local/mysql/etc/my.cnf
/usr/local/mysql/bin/mysql_install_db
chown -R mysql:mysql /usr/local/mysql


## configuration
mkdir /var/run/mysqld
chown -R mysql:mysql /var/run/mysqld
mkdir /var/log/mysqld
chown -R mysql:mysql /var/log/mysqld
vi /usr/local/mysql/etc/my.cnf
[mysqld]
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysql.sock
log-error       = /var/log/mysqld/err.log
skip-innodb
skip-bdb
query_cache_size = 128M
tmp_table_size = 32M
max_connections = 128
wait_timeout = 3600
interactive_timeout = 3600
long_query_time = 1
log_slow_queries = /var/log/mysqld/slow_queries.log
ft_min_word_len = 2
skip-name-resolve
#log-bin=mysql-bin
#server-id       = 1


cp -f /usr/local/mysql/share/mysql/mysql.server /etc/rc.d/init.d/mysqld
vi /etc/rc.d/init.d/mysqld
pid_file=/var/run/mysqld/mysqld.pid
chmod +x /etc/rc.d/init.d/mysqld
chkconfig --del mysqld && chkconfig --add mysqld

vi ~/.bash_profile
PATH=$PATH:$HOME/bin:/usr/local/mysql/bin

service mysqld start
/usr/local/mysql/bin/mysqladmin -u root password 'root'

ln -s /var/run/mysqld/mysql.sock /tmp/