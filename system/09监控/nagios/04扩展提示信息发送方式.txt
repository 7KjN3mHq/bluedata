1. 使用 smtp 发送邮件
objects/commands.cfg 中有邮件提醒命令的设置
如要通过 smtp 发送邮件，可以使用 sendEmail
http://caspian.dotconf.net/menu/Software/SendEmail/
tar zxvf sendEmail-v1.54.tar.gz
cd sendEmail-v1.54
mv sendEmail /usr/local/bin/

发送邮件的示例：
sendEmail -f nagios@test.com -t admin@test.com -s smtp.test.com -u "test" -xu nagios@test.com -xp password -m "test."

vi objects/commands.cfg
把 notify-host-by-email 和 notify-service-by-email 的邮件发送部分改为：
/usr/local/bin/sendEmail -f nagios@test.com -t $CONTACTEMAIL$ -s smtp.test.com -u "$HOSTALIAS$/$SERVICEDESC$ is $SERVICESTATE$" -xu nagios@test.com -xp password


2. 发送 msn 提醒
这里有个 perl 写的程序：
http://blog.chinaunix.net/u/24312/showart_1076329.html

yum install perl-XML-Simple
yum install perl-Hash-Merge
perl -MCPAN -e 'install Net::MSN'
cd msn
修改一下 hello.pl 的 $handle 和 $password
chmod +x hello.pl

把发送者和接收者互相加为好友，然后发个测试信息试试：
./hello.pl admin@test.com hello

第一次运行时发现这样的错误提示：
could not find ParserDetails.ini in /usr/lib/perl5/vendor_perl/5.8.5/XML/SAX
在这里有相关说明：
http://perl-xml.sourceforge.net/faq/#parserdetails.ini
执行
perl -MXML::SAX -e "XML::SAX->add_parser(q(XML::SAX::PurePerl))->save_parsers()"

mkdir /usr/local/nagios/lib
mv lib /usr/local/nagios/lib/msn
chown -R nagios:nagios /usr/local/nagios/lib

vi msn_send.pl
#!/usr/bin/perl
use lib "/usr/local/nagios/lib/msn";
my $handle = 'nagios@live.cn';
my $password = 'password';

chown nagios:nagios msn_send.pl
chmod +x msn_send.pl
mv msn_send.pl /usr/local/nagios/libexec/

添加 MSN 提醒执行的命令：
vi /usr/local/nagios/etc/objects/commands.cfg
define command{
        command_name    notify-host-by-msn
        command_line    /usr/local/nagios/libexec/msn_send.pl $CONTACTEMAIL$ "`/usr/bin/printf "%b" "***** Monitor *****\n\nNotification Type: $NOTIFICATIONTYPE$\nHost: $HOSTNAME$\nState: $HOSTSTATE$\nAddress: $HOSTADDRESS$\nInfo: $HOSTOUTPUT$\n\nDate/Time: $LONGDATETIME$\n"`"
        }

define command{
        command_name    notify-service-by-msn
        command_line    /usr/local/nagios/libexec/msn_send.pl $CONTACTEMAIL$ "`/usr/bin/printf "%b" "***** Monitor *****\n\nNotification Type: $NOTIFICATIONTYPE$\n\nService: $SERVICEDESC$\nHost: $HOSTALIAS$\nAddress: $HOSTADDRESS$\nState: $SERVICESTATE$\n\nDate/Time: $LONGDATETIME$\n\nAdditional Info:\n\n$SERVICEOUTPUT$"`"
        }


3. 发送 短信 提醒
简单的，在 www.139.com 注册移动的邮箱，设置邮件短信提醒。这样就可以发送邮件的标题到注册的手机号码上。

还有利用飞信实现的：
http://www.it-adv.net/
依赖 glibc-2.4 。 CentOS4/RHEL4, Debian Etch 不能使用。

安装所依赖的库：
tar zxvf lib.tar.gz
mv lib /usr/local/lib/fetion
echo "/usr/local/lib/fetion" > /etc/ld.so.conf.d/fetion-i386.conf
ldconfig

再安装飞信的命令行客户端：
tar zxvf fetion_linux_20080402.tar.gz -C /usr/local/bin/

vi /usr/local/bin/sms.sh
#!/bin/sh
/usr/local/bin/sms -f 159xxxxxxxx -p password -t $1 -m "$2"

chmod +x /usr/local/bin/sms.sh

如添加 MSN 提醒命令那样添加短信提醒的命令就可以了。

Debian Etch 可以升级到 testing ， glibc 也就更新到 2.4 了。
sed -e 's|etch|testing|g' /etc/apt/sources.list > /etc/apt/sources.list~
mv /etc/apt/sources.list~ /etc/apt/sources.list
apt-get update
apt-get dist-upgrade