软件下载：
http://www.moosefs.org/download.html

主控服务器 Master Server 安装：
groupadd mfs
useradd -g mfs -d /var/lib/mfs -s /sbin/nologin mfs

tar zxvf mfs-1.6.15.tar.gz
cd mfs-1.6.15
./configure \
--prefix=/usr \
--sysconfdir=/etc \
--localstatedir=/var/lib \
--with-default-user=mfs \
--with-default-group=mfs \
--disable-mfschunkserver \
--disable-mfsmount

make
make install

cd /etc
cp mfsmaster.cfg.dist mfsmaster.cfg
cp mfsmetalogger.cfg.dist mfsmetalogger.cfg
cp mfsexports.cfg.dist mfsexports.cfg

设置访问权限：
vi mfsexports.cfg
192.168.0.0/24 / rw,alldirs,maproot=0

cd /var/lib/mfs
cp metadata.mfs.empty metadata.mfs

修改 /etc/hosts 文件以绑定主机名 mfsmaster 与 ip 地址：
vi /etc/hosts
192.168.0.201 mfsmaster

启动： /usr/sbin/mfsmaster start

监控服务： /usr/sbin/mfscgiserv
http://192.168.0.201:9425


备份服务器 Backup Server (metalogger) 安装：
groupadd mfs
useradd -g mfs -d /var/lib/mfs -s /sbin/nologin mfs

tar zxvf mfs-1.6.15.tar.gz
cd mfs-1.6.15
./configure \
--prefix=/usr \
--sysconfdir=/etc \
--localstatedir=/var/lib \
--with-default-user=mfs \
--with-default-group=mfs \
--disable-mfschunkserver \
--disable-mfsmount

make
make install

cd /etc
cp mfsmetalogger.cfg.dist mfsmetalogger.cfg

修改 /etc/hosts 文件，增加下面的行：
192.168.0.201 mfsmaster

运行备份服务 mfsmetaloger:
/usr/sbin/mfsmetalogger start


存储块服务器 Chunk Servers 安装：
groupadd mfs
useradd -g mfs -d /var/lib/mfs -s /sbin/nologin mfs

tar zxvf mfs-1.6.15.tar.gz
cd mfs-1.6.15
./configure \
--prefix=/usr \
--sysconfdir=/etc \
--localstatedir=/var/lib \
--with-default-user=mfs \
--with-default-group=mfs \
--disable-mfsmaster \
--enable-mfsmount

make
make install

cd /etc
cp mfschunkserver.cfg.dist mfschunkserver.cfg
cp mfshdd.cfg.dist mfshdd.cfg

vi mfshdd.cfg
/data/mfs

chown -R mfs:mfs /data/mfs

vi /etc/hosts
192.168.0.201 mfsmaster

启动 Chunk Server:
/usr/sbin/mfschunkserver start


客户端安装：
依赖 fuse:
Debian:
apt-get install pkg-config
The following NEW packages will be installed:
  libglib2.0-0 libglib2.0-data libpcre3 pkg-config

apt-get install libfuse-dev
The following NEW packages will be installed:
  libfuse-dev libfuse2 libselinux1-dev libsepol1-dev

CentOS:
http://linux.web.psi.ch/dist/scientific/44/kernel/
http://linux.web.psi.ch/dist/scientific/4/kernel/
yum install fuse dkms dkms-fuse fuse-devel pkgconfig
yum install kernel-devel
yum install fuse dkms dkms-fuse
yum install pkgconfig fuse-devel


groupadd mfs
useradd -g mfs -d /var/lib/mfs -s /sbin/nologin mfs

tar zxvf mfs-1.6.15.tar.gz
cd mfs-1.6.15
./configure \
--prefix=/usr \
--sysconfdir=/etc \
--localstatedir=/var/lib \
--with-default-user=mfs \
--with-default-group=mfs \
--disable-mfsmaster \
--disable-mfschunkserver

make
make install

vi /etc/hosts
192.168.0.201 mfsmaster

挂载：
mkdir -p /mnt/mfs
modprobe fuse
/usr/bin/mfsmount /mnt/mfs -H mfsmaster


MooseFS 基础用法：
mfsgetgoal /mnt/mfs
mfssetgoal 2 /mnt/mfs
mfsgetgoal -r /mnt/mfs
mfssetgoal -r 2 /mnt/mfs

mfsgettrashtime /mnt/mfs
mfssettrashtime 600 /mnt/mfs
mfsgettrashtime -r /mnt/mfs
mfssettrashtime -r 600 /mnt/mfs

mfscheckfile /mnt/mfs/mfs-1.6.15.tar.gz

mfsmount -h mfsmaster -m -w /mnt/mfsmeta
mfsmetarestore -a
mfschunkserver -s