mfsmaster:
groupadd mfs
useradd -g mfs -d /usr/local/mfs -s /usr/sbin/nologin mfs

wget http://www.moosefs.com/files/mfs-1.5.12.tar.gz
tar zxvf mfs-1.5.12.tar.gz
cd mfs-1.5.12
./configure \
--disable-mfschunkserver \
--disable-mfsmount \
--prefix=/usr/local/mfs \
--with-default-user=mfs \
--with-default-group=mfs

make
make install

cd /usr/local/mfs/etc

ln -s mfsmaster.cfg mfsmaster.cfg.var

/usr/local/mfs/sbin/mfsmaster start

ps aux | grep mfsmaster | grep -v grep

/usr/local/mfs/sbin/mfsmaster -s


chunkserver:
groupadd mfs
useradd -g mfs -d /usr/local/mfs -s /usr/sbin/nologin mfs

wget http://www.moosefs.com/files/mfs-1.5.12.tar.gz
tar zxvf mfs-1.5.12.tar.gz
cd mfs-1.5.12
./configure \
--disable-mfsmaster \
--disable-mfsmount \
--prefix=/usr/local/mfs \
--with-default-user=mfs \
--with-default-group=mfs

make
make install

cd /usr/local/mfs/etc
ln -s mfschunkserver.cfg mfschunkserver.cfg.var

lvcreate -L 10G -n mfs vg
apt-get install reiserfsprogs
mkfs.reiserfs /dev/vg/mfs

mkdir /mfs

vi /etc/fstab
/dev/mapper/vg-mfs /mfs            reiserfs    noatime,nodiratime        0       2
mount -a

chown -R mfs:mfs /mfs

vi /usr/local/mfs/etc/mfshdd.cfg
/mfs

/usr/local/mfs/sbin/mfschunkserver start

ps aux | grep mfschunkserver | grep -v grep

/usr/local/mfs/sbin/mfschunkserver -s


mfsmount:
apt-get install pkg-config
The following NEW packages will be installed:
  libglib2.0-0 libglib2.0-data libpcre3 pkg-config

apt-get install libfuse-dev
The following NEW packages will be installed:
  libfuse-dev libfuse2 libselinux1-dev libsepol1-dev

CentOS:
http://linux.web.psi.ch/dist/scientific/44/kernel/
http://linux.web.psi.ch/dist/scientific/4/kernel/
yum install fuse dkms dkms-fuse fuse-devel pkgconfig
yum install kernel-devel
yum install fuse dkms dkms-fuse
yum install pkgconfig fuse-devel

groupadd mfs
useradd -g mfs -d /usr/local/mfs -s /usr/sbin/nologin mfs

wget http://www.moosefs.com/files/mfs-1.5.12.tar.gz
tar zxvf mfs-1.5.12.tar.gz
cd mfs-1.5.12
./configure \
--disable-mfsmaster \
--enable-mfsmount \
--prefix=/usr/local/mfs \
--with-default-user=mfs \
--with-default-group=mfs

make
make install

vi .bashrc
PATH=$PATH:/usr/local/mfs/bin
export PATH

modprobe fuse
mfsmount -h mfsmaster -w /home

mfsgetgoal /home
mfsrgetgoal /home
mfssetgoal 3 /home
mfsrsetgoal 3 /home

mfsgettrashtime /home
mfsrgettrashtime /home
mfssettrashtime 600 /home
mfsrsettrashtime 600 /home


Using MFS:
mkdir /mfsmeta
mfsmount -h mfsmaster -m -w /mfsmeta


/usr/local/mfs/sbin/mfsmetarestore -a


lvextend -L +5G /dev/vg/mfs
resize_reiserfs /dev/vg/mfs
/usr/local/mfs/sbin/mfschunkserver -s
/usr/local/mfs/sbin/mfschunkserver start