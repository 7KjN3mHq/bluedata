apt-get install php5
会安装所依赖的 apache2

vi /etc/php5/apache2/php.ini
max_execution_time = 5
memory_limit = 8M
default_socket_timeout = 10
mysql.allow_persistent = Off
mysql.connect_timeout = 10
session.gc_maxlifetime = 3600
session.bug_compat_42 = 0
session.bug_compat_warn = 0

# Install ZendOptimizer
tar zxvf ZendOptimizer-3.3.3-linux-glibc23-x86_64.tar.gz
cd ZendOptimizer-3.3.3-linux-glibc23-x86_64
./install
cd ..

cd /etc/php5/apache2
mv php.ini-zend_optimizer.bak php.ini

vi /etc/php5/conf.d/zend_optimizer.ini
zend_optimizer.optimization_level=1023
zend_extension_manager.optimizer=/usr/local/Zend/lib/Optimizer-3.3.3
zend_optimizer.version=3.3.3
zend_extension=/usr/local/Zend/lib/ZendExtensionManager.so


# Installing eAccelerator
apt-get install build-essential php5-dev
wget http://bart.eaccelerator.net/source/0.9.5.3/eaccelerator-0.9.5.3.tar.bz2
tar xvfj eaccelerator-0.9.5.3.tar.bz2
cd eaccelerator-0.9.5.3
phpize
./configure
make
make install

vi /etc/php5/conf.d/eaccelerator.ini
extension="eaccelerator.so"
eaccelerator.shm_size="16"
eaccelerator.cache_dir="/var/cache/eaccelerator"
eaccelerator.enable="1"
eaccelerator.optimizer="1"
eaccelerator.check_mtime="1"
eaccelerator.debug="0"
eaccelerator.filter=""
eaccelerator.shm_max="0"
eaccelerator.shm_ttl="0"
eaccelerator.shm_prune_period="0"
eaccelerator.shm_only="0"
eaccelerator.compress="1"
eaccelerator.compress_level="9"

mkdir -p /var/cache/eaccelerator
chown -R www-data:www-data /var/cache/eaccelerator


# Configure Apache
Timeout 30
KeepAlive Off

ServerLimit         1024
MaxClients          1024

a2enmod include
a2enmod rewrite
a2dissite default
a2ensite nvkan

tar zxvf cronolog-1.6.2.tar.gz
cd cronolog-1.6.2
./configure
make
make install

vi /etc/apache2/apache2.conf
#CustomLog /var/log/apache2/other_vhosts_access.log vhost_combined
CustomLog "|/usr/local/sbin/cronolog /var/log/apache2/access_log.%Y%m%d" combined



# Configure MySQL
vi /etc/mysql/my.cnf
datadir         = /data
#bind-address           = 127.0.0.1
skip-name-resolve

key_buffer              = 768M
max_connections        = 256
wait_timeout = 30
interactive_timeout = 30

table_cache            = 512
sort_buffer_size = 2M
read_buffer_size = 2M
read_rnd_buffer_size = 8M
myisam_sort_buffer_size = 512M
thread_concurrency     = 8
query_cache_size        = 512M

log-error       = /var/log/mysql/err.log
log_slow_queries        = /var/log/mysql/mysql-slow.log
long_query_time = 1

skip-innodb