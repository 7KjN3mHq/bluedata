<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0050)http://www.lunsou.org/docs/extmail_solution_linux/ -->
<HTML><HEAD><TITLE>ExtMail Solution HOWTO for Linux x86_64</TITLE>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META content="MSHTML 6.00.2900.3132" name=GENERATOR>
<STYLE>
@font-face {
	font-family: Wingdings;
}
@font-face {
	font-family: 宋体;
}
@font-face {
	font-family: @宋体;
}
@page Section1 {size: 595.3pt 841.9pt; margin: 72.0pt 33.15pt 72.0pt 33.15pt; layout-grid: 15.6pt; }
P.MsoNormal {
	TEXT-JUSTIFY: inter-ideograph; FONT-SIZE: 10.5pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: justify
}
LI.MsoNormal {
	TEXT-JUSTIFY: inter-ideograph; FONT-SIZE: 10.5pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: justify
}
DIV.MsoNormal {
	TEXT-JUSTIFY: inter-ideograph; FONT-SIZE: 10.5pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: justify
}
H1 {
	FONT-WEIGHT: bold; FONT-SIZE: 24pt; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
H3 {
	FONT-WEIGHT: bold; FONT-SIZE: 13.5pt; BACKGROUND: #cccccc; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
H4 {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
A:link {
	COLOR: blue; TEXT-DECORATION: underline
}
SPAN.MsoHyperlink {
	COLOR: blue; TEXT-DECORATION: underline
}
A:visited {
	COLOR: blue; TEXT-DECORATION: underline
}
SPAN.MsoHyperlinkFollowed {
	COLOR: blue; TEXT-DECORATION: underline
}
P {
	FONT-SIZE: 12pt; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
PRE {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: 宋体
}
P.line {
	BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; FONT-SIZE: 12pt; PADDING-BOTTOM: 0cm; MARGIN-LEFT: 0cm; BORDER-LEFT: medium none; MARGIN-RIGHT: 0cm; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; FONT-FAMILY: 宋体
}
LI.line {
	BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; FONT-SIZE: 12pt; PADDING-BOTTOM: 0cm; MARGIN-LEFT: 0cm; BORDER-LEFT: medium none; MARGIN-RIGHT: 0cm; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; FONT-FAMILY: 宋体
}
DIV.line {
	BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; FONT-SIZE: 12pt; PADDING-BOTTOM: 0cm; MARGIN-LEFT: 0cm; BORDER-LEFT: medium none; MARGIN-RIGHT: 0cm; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; FONT-FAMILY: 宋体
}
P.smtitle {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
LI.smtitle {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
DIV.smtitle {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN-LEFT: 0cm; MARGIN-RIGHT: 0cm; FONT-FAMILY: 宋体
}
DIV.Section1 {
	page: Section1
}
OL {
	MARGIN-BOTTOM: 0cm
}
UL {
	MARGIN-BOTTOM: 0cm
}
.style1 {color: #FF0000}
</STYLE>
</HEAD>
<BODY lang=ZH-CN style="TEXT-JUSTIFY-TRIM: punctuation" vLink=blue link=blue>
<DIV class=Section1 style="LAYOUT-GRID:  15.6pt none">
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-SIZE: 24pt; FONT-FAMILY: 宋体">ExtMail Solution HOWTO for Linux 
X86_64</SPAN></B></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" 
align=left><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">版权声明：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">本文版权归作者所有，如其他个人、第三方网站或媒体报刊等需转载全文或节选，为支持我们的工作，请务必注明如下信息：</SPAN></B><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"> </SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="COLOR: red; TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">二次更改信息：bluedata <SPAN 
  lang=EN-US>&lt;bluedata(at)gmail(dot)com&gt; (update 2007-07-04)</SPAN></SPAN>
  <LI class=MsoNormal style="COLOR: red; TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">更改作者信息：海天 <SPAN 
  lang=EN-US>&lt;huang(at)lunsou(dot)org&gt;</SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">原始作者信息：<SPAN lang=EN-US>hzqbbc &lt;hzqbbc (at) hzqbbc 
  (dot) com&gt; </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">文章原始出处：<SPAN lang=EN-US><A 
  href="http://www.extmail.org/docs/extmail_solution_linux/">http://www.extmail.org/docs/extmail_solution_linux/</A> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">项目首页：<SPAN lang=EN-US><A 
  href="http://www.extmail.org/">http://www.extmail.org/</A> 
</SPAN></SPAN></LI></UL>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果因此而给您带来麻烦，请您原谅，谢谢合作。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" 
align=left><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">变更说明</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="COLOR: red; TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.20.1 2006-12-25</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：修改为支持<SPAN 
  lang=EN-US>x86_64</SPAN>系统的说明，并将extmail升级到最新版本。</SPAN> 
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.20 2006-11-26</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：增加对<SPAN 
  lang=EN-US>uidnumber/gidnumber</SPAN>说明，感谢<SPAN lang=EN-US>elm </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.19 2006-11-25</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：增加对<SPAN lang=EN-US>maildrop</SPAN>增加<SPAN 
  lang=EN-US>vuser/vgroup</SPAN>说明，感谢<SPAN lang=EN-US>elm </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.18 2006-09-04</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：修正一处输入错误，一处不明确的地方<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.17 2006-08-30</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：修正缺漏<SPAN 
  lang=EN-US>receive_override_options</SPAN>的<SPAN lang=EN-US>bug </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.16 2006-08-28</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：修正<SPAN lang=EN-US>maildrop</SPAN>配置错误，感谢风云！<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">0.15 2006-08-17</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">：增加<SPAN lang=EN-US>mysql/httpd</SPAN>开机自启动的支持<SPAN 
  lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" 
align=left><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">关于此文</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">版　　本：<SPAN lang=EN-US>0.20.1 </SPAN></SPAN>
  <LI class=MsoNormal style="COLOR: red; TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">更改作者：<SPAN 
  lang=EN-US>huang&lt;huang(at)lunsou(dot)org&gt;</SPAN></SPAN> 
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">原始作者：<SPAN lang=EN-US>He zhiqiang &lt;hzqbbc (at) 
  hzqbbc (dot) com&gt; </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">项目主页：<SPAN lang=EN-US><A 
  href="http://www.extmail.org/">http://www.extmail.org/</A> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">个人主页：<SPAN lang=EN-US><A 
  href="http://www.hzqbbc.com/">http://www.hzqbbc.com/</A> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">最后更新：<SPAN lang=EN-US>2006-11-26</SPAN><SPAN 
  lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">本文档以<SPAN 
lang=EN-US>32</SPAN>位机器的安装为蓝本，以<SPAN lang=EN-US>RPM</SPAN>系统为基础，进行适当修改，使之符合<SPAN 
lang=EN-US>64</SPAN>位机器。所涉及软件全部是<SPAN lang=EN-US>OpenSource</SPAN>软件，版权以<SPAN 
lang=EN-US>GPL</SPAN>为主，作为企业应用没有任何版权<SPAN lang=EN-US>/</SPAN>法律问题。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">基于<SPAN 
lang=EN-US>RPM</SPAN>系统具有方便、快捷，易快速复制和重现的优点。如果用户希望获得这些<SPAN 
lang=EN-US>RPM</SPAN>包的源码包，可以与作者联系。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编写本文的初衷，是给那些希望快速架设邮件系统而不想过多了解复杂的系统知识的网管<SPAN 
lang=EN-US>/</SPAN>用户，为了使软件之间的结合更紧密，部分软件的配置及测试方面进行了增强改进，因此本文的一些操作步骤作者不能保证在其他场合能完全适用，敬请注意。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">本文假定读者是在<B><I><SPAN lang=EN-US>CentOS 4.x</SPAN>或<SPAN 
lang=EN-US> RedHat EnterPrise Linux 4.x</SPAN></I></B>平台上安装，并具有一定的<SPAN 
lang=EN-US>Unix</SPAN>平台<SPAN lang=EN-US> / Linux</SPAN>平台系统经验，懂得<SPAN 
lang=EN-US>rpm</SPAN>基本命令及常规的系统操作，如文件的删除，目录创建，改名，和<SPAN 
lang=EN-US>vi</SPAN>编辑器的基本使用等。</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" 
align=left><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">文档目录</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#intro">ExtMail 
  Solution<SPAN lang=EN-US><SPAN lang=EN-US>概述</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#hardware"><SPAN 
  lang=EN-US><SPAN lang=EN-US>硬件配置</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#os"><SPAN 
  lang=EN-US><SPAN lang=EN-US>操作系统安装</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#basic"><SPAN 
  lang=EN-US><SPAN lang=EN-US>下载ExtMail Solution</SPAN></SPAN><SPAN 
  lang=EN-US><SPAN lang=EN-US>软件包</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#postfix">MTA-Postfix<SPAN 
  lang=EN-US><SPAN lang=EN-US>配置</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#authlib"><SPAN 
  lang=EN-US><SPAN lang=EN-US>配置Courier-Authlib</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#maildrop"><SPAN 
  lang=EN-US><SPAN lang=EN-US>安<SPAN 
  lang=EN-US>装maildrop</SPAN></SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#apache"><SPAN 
  lang=EN-US><SPAN lang=EN-US>配置Apache</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#extmail"><SPAN 
  lang=EN-US><SPAN lang=EN-US>安装Webmail-ExtMail</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#extman"><SPAN 
  lang=EN-US><SPAN lang=EN-US>安装管理后台-ExtMan</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#mailgraph_ext"><SPAN 
  lang=EN-US><SPAN lang=EN-US>配置图形化日志系统-mailgraph_ext</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#test"><SPAN 
  lang=EN-US><SPAN lang=EN-US>测试基本系统</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#sasl"><SPAN 
  lang=EN-US><SPAN lang=EN-US>配置Cyrus-SASL</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#imap"><SPAN 
  lang=EN-US><SPAN lang=EN-US>安装Courier-IMAP</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#filter"><SPAN 
  lang=EN-US><SPAN lang=EN-US>内容/</SPAN></SPAN><SPAN lang=EN-US><SPAN 
  lang=EN-US>病毒过滤</SPAN></SPAN></A> </SPAN></LI></UL>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#filter_prepare"><SPAN 
lang=EN-US><SPAN lang=EN-US>准备工作</SPAN></SPAN></A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#filter_clamav">ClamAV</A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#filter_amavis">Amavisd-new</A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#filter_mta"><SPAN 
lang=EN-US><SPAN lang=EN-US>配置Postfix</SPAN></SPAN></A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#filter_test"><SPAN 
lang=EN-US><SPAN lang=EN-US>测试</SPAN></SPAN></A></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#slockd"><SPAN 
  lang=EN-US><SPAN lang=EN-US>反垃圾邮件-Spam Locker</SPAN></SPAN></A> 
</SPAN></LI></UL>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#slockd_prepare"><SPAN 
lang=EN-US><SPAN lang=EN-US>准备工作</SPAN></SPAN></A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#slockd_test"><SPAN 
lang=EN-US><SPAN lang=EN-US>配置/</SPAN></SPAN><SPAN lang=EN-US><SPAN 
lang=EN-US>测试</SPAN></SPAN></A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#slockd_mta"><SPAN 
lang=EN-US><SPAN lang=EN-US>与Postfix</SPAN></SPAN><SPAN lang=EN-US><SPAN 
lang=EN-US>结合</SPAN></SPAN></A></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#last_test"><SPAN 
  lang=EN-US><SPAN lang=EN-US>最终测试</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#extra"><SPAN 
  lang=EN-US><SPAN lang=EN-US>附加信息</SPAN></SPAN></A> </SPAN></LI></UL>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#extra_fcgi"><SPAN 
lang=EN-US><SPAN lang=EN-US>增加FCGI</SPAN></SPAN><SPAN lang=EN-US><SPAN 
lang=EN-US>支持</SPAN></SPAN></A></SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 72pt; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="FONT-FAMILY: 宋体"><A 
href="http://www.lunsou.org/docs/extmail_solution_linux/#extra_courier-imap"><SPAN 
lang=EN-US><SPAN lang=EN-US>编译Courier-IMAP</SPAN></SPAN></A></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#end"><SPAN 
  lang=EN-US><SPAN lang=EN-US>结束语</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#bugs"><SPAN 
  lang=EN-US><SPAN lang=EN-US>已知Bugs</SPAN></SPAN></A> </SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体"><A 
  href="http://www.lunsou.org/docs/extmail_solution_linux/#todo">TODO<SPAN 
  lang=EN-US><SPAN lang=EN-US>列表</SPAN></SPAN></A> </SPAN></LI></UL>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=intro></A><B><SPAN lang=EN-US 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">ExtMail Solution </SPAN></B><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">结构</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">ExtMail Solution </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一个基于优秀开源软件的电子邮件系统解决方案，核心部件包括了<SPAN lang=EN-US>Postfix, 
Amavisd-new, ClamAV, ExtMail </SPAN>和<SPAN lang=EN-US>ExtMan</SPAN>，<SPAN 
lang=EN-US> Courier</SPAN>系列软件。是一个功能相对比较齐全的免费电子邮件系统。以下是其主要的特性列表：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持<SPAN lang=EN-US>SMTP/POP3/HTTP</SPAN>协议<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持<SPAN lang=EN-US>SMTP</SPAN>认证及<SPAN 
  lang=EN-US>ESMTP </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">可支持大容量邮箱<SPAN lang=EN-US>(</SPAN>大于<SPAN 
  lang=EN-US>1GB</SPAN>）<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">高速<SPAN lang=EN-US>Web</SPAN>界面访问邮箱<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">完整的<SPAN lang=EN-US>Web</SPAN>管理后台<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">在线服务端病毒过滤<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">内建内容过滤<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">SMTP</SPAN><SPAN style="FONT-FAMILY: 宋体">行为识别垃圾邮件<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持大量反垃圾邮件技术<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">图形化邮件日志分析<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持别名<SPAN lang=EN-US>/</SPAN>多域<SPAN 
  lang=EN-US>/</SPAN>域管理员等<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持网络磁盘<SPAN lang=EN-US>/POP3</SPAN>邮件<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持读<SPAN lang=EN-US>/</SPAN>写<SPAN 
  lang=EN-US>HTML</SPAN>格式邮件<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持定制模板及多语言<SPAN lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">整个邮件解决方案由如下软件组成：<SPAN 
lang=EN-US><BR>&nbsp;</SPAN></SPAN></P>
<TABLE class=MsoNormalTable style="WIDTH: 100%" cellPadding=0 width="100%" 
border=1>
  <TBODY>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">功能模块</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">内容</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">备注</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">操作系统（<SPAN lang=EN-US>OS</SPAN>）</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">CentOS 4.3</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">CentOS</SPAN><SPAN style="FONT-FAMILY: 宋体">和<SPAN 
      lang=EN-US>RHEL</SPAN>是一样的，而且升级免费</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">邮件传输代理（<SPAN lang=EN-US>MTA</SPAN>）</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Postfix 2.2.11</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">使用<SPAN 
      lang=EN-US>2.2.11</SPAN>，虽然不是最新但是对一般人而言足够用了</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">数据库<SPAN lang=EN-US>/</SPAN>目录服务</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">MySQL 4.1</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">可选<SPAN lang=EN-US>openLDAP</SPAN>或<SPAN 
      lang=EN-US>NetScape LDAP</SPAN>，本文以<SPAN 
      lang=EN-US>MySQL</SPAN>为蓝本</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">邮件投递代理（<SPAN lang=EN-US>MDA</SPAN>）</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">maildrop 2.0.x</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">支持过滤和强大功能</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Web</SPAN><SPAN 
      style="FONT-FAMILY: 宋体">帐户管理后台</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">ExtMan 0.2beta3</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">支持无限域名、无限用户</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">POP3 </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">服务器</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Courier-IMAP</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">只使用<SPAN 
      lang=EN-US>pop3</SPAN>部分，对于大部分企业而言完全足够</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">WebMail </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">系统</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">ExtMail 1.0beta3 </SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">支持多语言、全部模板化，功能基本齐全</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">防病毒软件（<SPAN 
      lang=EN-US>Anti-Virus</SPAN>）</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">ClamAV 0.88</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">最热门的开源杀毒软件</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">SMTP</SPAN><SPAN 
      style="FONT-FAMILY: 宋体">阶段反垃圾邮件工具</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Spam Locker 0.2beta</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">基于<SPAN lang=EN-US>SMTP</SPAN>行为识别的<SPAN 
      lang=EN-US>Antispam</SPAN>软件，大量可选插件</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">内容过滤器</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Amavisd-new 2.40</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Content-Filter</SPAN><SPAN 
      style="FONT-FAMILY: 宋体">软件，支持与<SPAN 
      lang=EN-US>clamav/sa</SPAN>的挂接</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">内容级别的反垃圾邮件工具</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">SpamAssassin</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">著名的<SPAN 
      lang=EN-US>SA</SPAN>，可以支持大量规则，但速度慢</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">SMTP</SPAN><SPAN 
      style="FONT-FAMILY: 宋体">认证库</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Cyrus SASL 2.1x</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">标准的<SPAN lang=EN-US>SASL</SPAN>实现库，可以支持<SPAN 
      lang=EN-US>Courier authlib</SPAN></SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">其他数据认证库</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Courier Authlib 0.57</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">authlib</SPAN><SPAN style="FONT-FAMILY: 宋体">是<SPAN 
      lang=EN-US>maildrop, courier-imap</SPAN>等服务的关键部件</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">日志分析及显示</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">mailgraph_ext</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
      style="FONT-FAMILY: 宋体">在<SPAN 
  lang=EN-US>ExtMan</SPAN>中已经包含了</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Web </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">服务器</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">Apache 2.0.x</SPAN></P></TD>
    <TD 
    style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
      <P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
      style="FONT-FAMILY: 宋体">CentOS </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">自带</SPAN></P></TD></TR></TBODY></TABLE>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=hardware></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">硬件配置</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">要流畅地运行邮件系统，建议的硬件配置如下：</SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">物理内存：<SPAN lang=EN-US>256M</SPAN><SPAN lang=EN-US>+ 
  </SPAN>推荐<SPAN lang=EN-US>512M</SPAN><SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">交换区：<SPAN lang=EN-US>2</SPAN>倍物理内存大小<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">CPU</SPAN><SPAN style="FONT-FAMILY: 宋体">：<SPAN 
  lang=EN-US>PIII 1G+ </SPAN>推荐<SPAN lang=EN-US>P4 </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">主板：推荐<SPAN lang=EN-US>Intel</SPAN>原装<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">网卡：<SPAN lang=EN-US>100M</SPAN><SPAN lang=EN-US>/1000M 
  </SPAN>推荐<SPAN lang=EN-US>3Com/Intel </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=os></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">操作系统安装</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">本文档支持<SPAN lang=EN-US>RedHat Enterprise 4.x 
</SPAN>及<SPAN lang=EN-US>CentOS 4.x</SPAN>版本。要注意的是安装系统时，只安装如下的组件：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><B><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">Web Server</SPAN></B> </LI></UL>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">要注意必须选中<SPAN 
lang=EN-US>httpd-suexec</SPAN>软件包，否则下文的配置将失效<SPAN lang=EN-US> </SPAN></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><B><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">MYSQL</SPAN></B><B><SPAN 
  style="FONT-FAMILY: 宋体">数据库</SPAN></B> </LI></UL>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">注意必须选中<SPAN lang=EN-US>mysql-server, libdbi-dbd-mysql, 
perl-DBD-mysql</SPAN>等模块，否则<SPAN lang=EN-US>extmail</SPAN>将无法连接<SPAN 
lang=EN-US>mysql </SPAN></SPAN></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><B><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">VIM</SPAN></B><B><SPAN 
  style="FONT-FAMILY: 宋体">编辑器</SPAN></B> </LI></UL>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">强烈建议安装<SPAN lang=EN-US>vim-enhanced</SPAN>软件包，它支持<SPAN 
lang=EN-US>main.cf</SPAN><B>彩色高亮语法分析</B><SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">其余的<SPAN lang=EN-US>Xwindows, </SPAN>打印，<SPAN 
lang=EN-US>KDE/Gnore, </SPAN>服务器配置工具，网络工具，开发包等全部都不要选上。安装完毕进入操作系统后，建议禁止<SPAN 
lang=EN-US>root</SPAN>直接登陆，并增加一个非<SPAN lang=EN-US>root</SPAN>帐户，例如叫<SPAN 
lang=EN-US>sysadmin</SPAN>。这样要以<SPAN lang=EN-US>root</SPAN>权限操作的话，必须先以<SPAN 
lang=EN-US>sysadmin</SPAN>身份登陆再<SPAN lang=EN-US>su</SPAN>到<SPAN 
lang=EN-US>root</SPAN>执行。方法：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">CentOS4.3</SPAN></B><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">安装步骤图解</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">以下将以详细的图解来介绍如何安装<SPAN 
lang=EN-US>CentOS4.3</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=483 
src="ExtMail Solution HOWTO for Linux x86_64.files/image001.gif" width=644 
border=0><BR>CentOS</SPAN><SPAN style="FONT-FAMILY: 宋体">启动光盘的启动画面，直接回车即可。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=483 
src="ExtMail Solution HOWTO for Linux x86_64.files/image002.gif" width=643 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">系统提示<SPAN 
lang=EN-US>“</SPAN>是否需要校验<SPAN lang=EN-US>CD</SPAN>媒质<SPAN 
lang=EN-US>”</SPAN>，请选择<SPAN lang=EN-US>“Skip”</SPAN>。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=600 
src="ExtMail Solution HOWTO for Linux x86_64.files/image003.gif" width=799 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">选择<SPAN 
lang=EN-US>“English”</SPAN>作为安装界面的语言。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image004.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">安装类型请务必选择<SPAN 
lang=EN-US>“Custom”</SPAN>，以便之后详细选择要装的软件包。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=599 
src="ExtMail Solution HOWTO for Linux x86_64.files/image005.gif" width=800 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">磁盘分区设置请选择<SPAN 
lang=EN-US>“Manually partition with disk Druid”</SPAN>（手工分区）。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=603 
src="ExtMail Solution HOWTO for Linux x86_64.files/image006.gif" width=804 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">如图，我们将<SPAN 
lang=EN-US>/</SPAN>，<SPAN lang=EN-US>/usr</SPAN>，<SPAN 
lang=EN-US>/var</SPAN>，<SPAN 
lang=EN-US>/var/spool/postfix</SPAN>等单独分成一个分区，注意：如果磁盘大小允许，请将<SPAN 
lang=EN-US>/var/spool/vscan</SPAN>目<SPAN 
lang=EN-US><BR></SPAN>录也单独成一个分区，该目录主要存放被过滤的临时邮件。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=601 
src="ExtMail Solution HOWTO for Linux x86_64.files/image007.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">配置网卡及子网掩码，记得点选<SPAN 
lang=EN-US>“Activate boot”</SPAN>。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=604 
src="ExtMail Solution HOWTO for Linux x86_64.files/image008.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">配置网关及<SPAN 
lang=EN-US>DNS</SPAN>，请将离你的服务器最近<SPAN lang=EN-US>DNS</SPAN>服务器<SPAN 
lang=EN-US>IP</SPAN>地址填入<SPAN lang=EN-US>“Primary DNS”</SPAN>。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=603 
src="ExtMail Solution HOWTO for Linux x86_64.files/image009.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">防火墙配置时，打开防火墙（选<SPAN 
lang=EN-US>Enable FireWall</SPAN>），并放行常规的服务（服务列表全选），最重要的是记得打开<SPAN 
lang=EN-US>SELinux</SPAN>（选<SPAN lang=EN-US>Active</SPAN>）<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image010.gif" width=801 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">时区选<SPAN 
lang=EN-US>“</SPAN>上海<SPAN lang=EN-US>”</SPAN>。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image011.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">输入<SPAN 
lang=EN-US>root</SPAN>帐户密码，建议使用较长的密码，并混杂数字与字母及特殊字符。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=603 
src="ExtMail Solution HOWTO for Linux x86_64.files/image012.gif" width=801 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">进入软件组的选择对话界面后，我们只选择<SPAN 
lang=EN-US>Editors</SPAN>组。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image013.gif" width=801 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">其次选择是<SPAN lang=EN-US>Web 
Server</SPAN>及<SPAN lang=EN-US>FTP Server</SPAN>组。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=601 
src="ExtMail Solution HOWTO for Linux x86_64.files/image014.gif" width=801 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">再次选择<SPAN lang=EN-US>MySQL 
DataBase</SPAN>组，并点击右边的<SPAN lang=EN-US>Details </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image015.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">在<SPAN 
lang=EN-US>Details</SPAN>对话框里，确保<SPAN lang=EN-US>libdbi-dbd-mysql</SPAN>，<SPAN 
lang=EN-US>mysql-server</SPAN>，<SPAN 
lang=EN-US>perl-DBD-MySQL</SPAN>等模块都被选中。<SPAN 
lang=EN-US>extmail</SPAN>依赖这些软件包。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image016.gif" width=803 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">最后，确认一下所做的选择。其他没有被提到的软件模块<SPAN 
lang=EN-US>/</SPAN>组全部都去掉。总共软件大小有<SPAN lang=EN-US>814MB</SPAN>左右。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=601 
src="ExtMail Solution HOWTO for Linux x86_64.files/image017.gif" width=801 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">点<SPAN 
lang=EN-US>Next</SPAN>后，安装系统提示必须要准备好<SPAN lang=EN-US>CentOS</SPAN>的第<SPAN 
lang=EN-US>1</SPAN>，<SPAN lang=EN-US>2</SPAN>，<SPAN lang=EN-US>3</SPAN>张光盘。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=603 
src="ExtMail Solution HOWTO for Linux x86_64.files/image018.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">系统进行初始化，磁盘分区等。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=602 
src="ExtMail Solution HOWTO for Linux x86_64.files/image019.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">系统安装到后面时，需要换安装盘。请将盘<SPAN 
lang=EN-US>2</SPAN>及盘<SPAN lang=EN-US>3</SPAN>按提示放入光驱。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=603 
src="ExtMail Solution HOWTO for Linux x86_64.files/image020.gif" width=802 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">安装完毕后，出现祝贺完成的界面，点<SPAN 
lang=EN-US>Reboot</SPAN>重新启动。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><IMG height=403 
src="ExtMail Solution HOWTO for Linux x86_64.files/image021.gif" width=722 
border=0><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">如无意外，系统进入登陆提示符界面。至此，<SPAN 
lang=EN-US>CentOS4.3</SPAN>的安装就结束了。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">以<SPAN lang=EN-US>root</SPAN>身份登进系统后，增加一个非<SPAN 
lang=EN-US>root</SPAN>帐户，名称为<SPAN 
lang=EN-US>sysadmin</SPAN>，密码按您的需求设置一个即可。接下来我们要禁止<SPAN 
lang=EN-US>root</SPAN>直接登陆，编辑<SPAN lang=EN-US>/etc/ssh/sshd_config 
</SPAN>修改以下配置为：<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">PermitRootLogin no </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后重新启动<SPAN lang=EN-US>sshd</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/sshd restart</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">这样禁止了<SPAN lang=EN-US>root</SPAN>直接登陆。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">配置<SPAN lang=EN-US>SELinux</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">自从<SPAN lang=EN-US>RHEL4/CentOS4</SPAN>以后，系统默认打开了<SPAN 
lang=EN-US>SELinux</SPAN>支持，简单说<SPAN 
lang=EN-US>SELinux</SPAN>就是一个强制性的安全机制，但是它也带来了不少麻烦，为了避免编写烦琐的<SPAN 
lang=EN-US>policy</SPAN>规则，本文档将屏蔽掉<SPAN lang=EN-US>SELinux</SPAN>对<SPAN 
lang=EN-US>MySQL</SPAN>及<SPAN lang=EN-US>httpd</SPAN>的保护。方法如下：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">setsebool 
httpd_disable_trans=1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">setsebool 
mysqld_disable_trans=1</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">操作完毕后，重新启动<SPAN lang=EN-US>mysql</SPAN>及<SPAN 
lang=EN-US>apache</SPAN>，并将如下命令加入<SPAN 
lang=EN-US>/etc/rc.d/rc.local</SPAN>以便服务器启动后能自动生效：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/usr/sbin/setsebool 
httpd_disable_trans=1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/usr/sbin/setsebool 
mysqld_disable_trans=1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/etc/init.d/mysqld restart</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/etc/init.d/httpd 
restart</SPAN></P></DIV>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=basic></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">下载<SPAN 
lang=EN-US>ExtMail Solution</SPAN>软件包</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">基本假定</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">整个系统的安装全过程都要求以<SPAN 
lang=EN-US>root</SPAN>身份执行，如果机器没有访问外部网络的能力，则事先下载好<SPAN lang=EN-US>ExtMail 
Solution</SPAN>软件包，并用<SPAN lang=EN-US>ftp</SPAN>以<SPAN 
lang=EN-US>sysadmin</SPAN>帐户的身份，上载到服务器。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">下载软件包</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">我们统一将软件包下载到<SPAN lang=EN-US>/root</SPAN>目录里。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">su - 
root</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
/root</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">wget <U><A 
href="http://www.lunsou.org/source/ExtMail-Solution-Linux-x86_64-0.1.tar.bz2"><SPAN 
style="COLOR: red">http://www.lunsou.org/source/</SPAN><SPAN 
style="COLOR: red">ExtMail-Solution-Linux-x86_64-0.1.tar.bz2</SPAN></A></U></SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">校验</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">下载的文件必须校验确认过没损坏才能使用。命令如下：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">wget <U><A 
href="http://www.lunsou.org/source/ExtMail-Solution-Linux-x86_64-0.1.tar.bz2"><SPAN 
style="COLOR: red">http://www.lunsou.org/source/</SPAN><SPAN 
style="COLOR: red">ExtMail-Solution-Linux-x86_64-0.1.tar.bz2</SPAN></A></U></SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">md5sum 
ExtMail-Solution-Linux-x86_64-0.1.tar.bz2 </SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">一个可能的结果：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">#md5sum 
ExtMail-Solution-Linux-x86_64-0.1.tar.bz2</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">8eef9b53c713eeca8559b3e176a6d8dc&nbsp; 
ExtMail-Solution-Linux-x86_64-0.1.tar.bz2</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于软件包不断的变更，所以上述结果和您的结果可能不一致，请以下载的<SPAN 
lang=EN-US>md5sum</SPAN>为准</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">解压</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">目前最新的<SPAN 
lang=EN-US>ExtMail-Solution</SPAN>软件包版本号为<SPAN 
lang=EN-US>0.1</SPAN>，软件包文件名为：<SPAN 
lang=EN-US>ExtMail-Solution-Linux-x86_64-0.1.tar.bz2</SPAN>，下载回来后，在<SPAN 
lang=EN-US>/root</SPAN>目录解开：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">tar xfj ExtMail-Solution-Linux-x86_64-0.1.tar.bz2 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">此外，我们假设本次安装默认域是<SPAN 
lang=EN-US>lunsou.com</SPAN>，主机名为：<SPAN lang=EN-US>mail.lunsou.com</SPAN>，<SPAN 
lang=EN-US>ExtMail Solution</SPAN>的文件目录是<SPAN 
lang=EN-US>/root/ExtMail-Solution-Linux-x86_64-0.1/</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">重要步骤：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">我们进入<SPAN 
lang=EN-US>/root/ExtMail-Solution-Linux-x86_64-0.1/</SPAN>目录，该目录下包括如下文件<SPAN 
lang=EN-US>/</SPAN>目录：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">RPMS/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">src/</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">其中<SPAN lang=EN-US>RPMS</SPAN>目录是本文的重点，里面包含了所需要的全部<SPAN 
lang=EN-US>rpm</SPAN>包和<SPAN lang=EN-US>src.rpm</SPAN>包，<SPAN 
lang=EN-US>src</SPAN>目录则是存放<SPAN lang=EN-US>extmail</SPAN>、<SPAN 
lang=EN-US>extman</SPAN>等相关软件的源码。<SPAN style="COLOR: red">本文也将把所有的<SPAN 
lang=EN-US>rpm</SPAN>包或<SPAN 
lang=EN-US>src.rpm</SPAN>包等的来源地址列出，用户也可以根据自己的实际需要下载。</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">下文所涉及的操作，绝大部分都是发生在<SPAN 
lang=EN-US>/root/ExtMail-Solution-Linux-x86_64-0.1</SPAN>目录里，请确保当前目录为：<B><I><SPAN 
lang=EN-US>/root/ExtMail-Solution-Linux-x86_64-0.1</SPAN></I></B></SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=postfix></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Postfix MTA</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">删除冲突软件<SPAN lang=EN-US>,sendmail</SPAN>，需要执行<SPAN 
lang=EN-US>: </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -e --nodeps sendmail</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">mysql</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">有关软件：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">CentOS4.x/ RedHat EL4.x </SPAN><SPAN 
style="FONT-FAMILY: 宋体">都自带<SPAN lang=EN-US>mysql-server</SPAN>，请用户自行安装好，包括<SPAN 
lang=EN-US>mysql</SPAN>和<SPAN lang=EN-US><SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>mysql-</SPAN></SPAN>devel</SPAN>等包</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">编译<SPAN 
lang=EN-US>postfix</SPAN></SPAN></B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">到<SPAN lang=EN-US><A 
href="http://postfix.wl0.org/ftp/official/2.2/SRPMS/">http://postfix.wl0.org/ftp/official/2.2/SRPMS/</A></SPAN>下载<SPAN 
lang=EN-US>postfix</SPAN>的<SPAN lang=EN-US>src</SPAN>包，这些包支持<SPAN 
lang=EN-US>mysql</SPAN>、<SPAN lang=EN-US>sasl</SPAN>、<SPAN 
lang=EN-US>tls</SPAN>等的功能，然后自己手动编译。编译<SPAN lang=EN-US>src</SPAN>包需要安装<SPAN 
lang=EN-US>rpmbuild</SPAN>等软件包。<SPAN lang=EN-US><BR>rpm -ivh 
postfix-2.2.11-1.src.rpm<BR></SPAN>然后转移到<SPAN 
lang=EN-US>/usr/src/redhat/SPECS</SPAN>，修改<SPAN 
lang=EN-US>postfix.spec</SPAN>文件，让其支持<SPAN lang=EN-US>mysql</SPAN>、<SPAN 
lang=EN-US>sasl</SPAN>。<SPAN lang=EN-US><BR>cd /usr/src/redhat/SPECS<BR>vi 
postfix.spec<BR></SPAN>将：<SPAN lang=EN-US><BR>%define with_mysql_redhat 
0<BR>%define with_sasl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0<BR></SPAN>改成：<SPAN lang=EN-US><BR>%define with_mysql_redhat 1<BR>%define 
with_sasl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2<BR></SPAN>以上表示开启<SPAN lang=EN-US>mysql</SPAN>和<SPAN 
lang=EN-US>sasl2</SPAN>（为<SPAN lang=EN-US>1</SPAN>表示支持<SPAN 
lang=EN-US>sasl1</SPAN>）的支持<SPAN lang=EN-US><BR></SPAN>最后编译生成<SPAN 
lang=EN-US>rpm</SPAN>包：<SPAN lang=EN-US><BR>rpmbuild -bb 
postfix.spec<BR></SPAN>在<SPAN 
lang=EN-US>/usr/src/redhat/RPMS/x86_64</SPAN>生成相关的<SPAN 
lang=EN-US>rpm</SPAN>包。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">安装<SPAN lang=EN-US>postfix</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -ivh --nodeps RPMS/postfix-2.2.11-1.rhel4.x86_64.rpm</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">特别注意：因为是<SPAN 
lang=EN-US>x86_64</SPAN>系统，所以安装结束后，将在<SPAN 
lang=EN-US>/usr/lib64/sasl2</SPAN>生成<SPAN 
lang=EN-US>smtpd.conf</SPAN>文件，而不是在<SPAN lang=EN-US>/usr/lib/sasl2</SPAN>下。<SPAN 
lang=EN-US>smtpd.conf</SPAN>在以下安装<SPAN 
lang=EN-US>sasl2</SPAN>结束后需要用到。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">配置<SPAN lang=EN-US>postfix</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">简化<SPAN lang=EN-US>postfix</SPAN>配置<SPAN lang=EN-US>: 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">postconf -n 
&gt; /etc/postfix/main2.cf</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mv 
/etc/postfix/main.cf /etc/postfix/main.cf.old</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mv 
/etc/postfix/main2.cf /etc/postfix/main.cf</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">再编辑<SPAN lang=EN-US>main.cf</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/postfix/main.cf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">增加如下内容：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># 
hostname</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mynetworks 
= 127.0.0.1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">myhostname 
= mail.extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mydestination = $mynetworks 
$myhostname</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># 
banner</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mail_name = 
Postfix - by extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_banner = $myhostname ESMTP 
$mail_name</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># response 
immediately</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_error_sleep_time = 0s</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">unknown_local_recipient_reject_code = 
450</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># extmail 
config here</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">virtual_alias_maps = 
mysql:/etc/postfix/mysql_virtual_alias_maps.cf</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">virtual_mailbox_domains = 
mysql:/etc/postfix/mysql_virtual_domains_maps.cf</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">virtual_mailbox_maps = 
mysql:/etc/postfix/mysql_virtual_mailbox_maps.cf</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">virtual_transport = 
maildrop:</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>mysql_virtual_alias_maps.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/postfix/mysql_virtual_alias_maps.cf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">内容如下：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">user = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">password = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">hosts = 
localhost</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">dbname = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">table = 
alias</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">select_field = goto</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">where_field 
= address</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>mysql_virtual_domains_maps.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/postfix/mysql_virtual_domains_maps.cf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">内容如下：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">user = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">password = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">hosts = 
localhost</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">dbname = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">table = 
domain</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">select_field = description</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">where_field 
= domain</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">#additional_conditions = and backupmx 
='0' and active ='1'</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>mysql_virtual_mailbox_maps.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/postfix/mysql_virtual_mailbox_maps.cf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">内容如下：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">user = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">password = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">hosts = 
localhost</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">dbname = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">table = 
mailbox</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">select_field = maildir</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">where_field 
= username</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">#additional_conditions = and active = 
'1'</SPAN></P></DIV>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=authlib></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Courier-Authlib</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">编译安装<SPAN 
lang=EN-US>Courier-Authlib</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">编译前先确认系统是否已经安装了<SPAN 
lang=EN-US>expect</SPAN>包，如果没有，请安装：<SPAN lang=EN-US><BR>rpm -ivh 
expect-5.42.1-1.x86_64.rpm</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">到<SPAN lang=EN-US><A 
href="http://www.extmail.org/source/courier-authlib-0.57-1hzq.src.rpm"><SPAN 
style="COLOR: red">http://www.extmail.org/source/courier-authlib-0.57-1hzq.src.rpm</SPAN></A></SPAN>下载<SPAN 
lang=EN-US>courier-authlib</SPAN>的<SPAN lang=EN-US>src</SPAN>包，然后重新编译：<SPAN 
lang=EN-US><BR>rpmbuild --rebuild 
courier-authlib-0.57-1hzq.src.rpm<BR></SPAN>编译结束后，在<SPAN 
lang=EN-US>/usr/src/redhat/RPMS/x86_64</SPAN>生成如下文件：<SPAN 
lang=EN-US><BR>courier-authlib-0.57-1hzq.x86_64.rpm<BR>courier-authlib-devel-0.57-1hzq.x86_64.rpm<BR>courier-authlib-mysql-0.57-1hzq.x86_64.rpm</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">运行如下命令安装相关软件包</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="COLOR: red; FONT-FAMILY: 宋体">libtool-libs-1.5.6-4.EL4.1.c4.4.x86_64.rpm</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">可以到：<SPAN lang=EN-US><BR><A 
href="http://mirror.centos.org/centos-4/4.4/os/x86_64/CentOS/RPMS/"><SPAN 
style="COLOR: windowtext; FONT-FAMILY: 'Times New Roman'; TEXT-DECORATION: none">http://mirror.centos.org/centos-4/4.4/os/x86_64/CentOS/RPMS/</SPAN></A></SPAN>下载</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"><BR>rpm -ivh 
RPMS/libtool-libs-1.5.6-4.EL4.1.c4.4.x86_64.rpm</SPAN></P>
<P 
align=left class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-size: 12pt; color: #FF0000;"><SPAN 
lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh RPMS/expect-5.42.1-1.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/courier-authlib-0.57-1hzq.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/courier-authlib-devel-0.57-1hzq.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/courier-authlib-mysql-0.57-1hzq.x86_64.rpm</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>/etc/authlib/authmysqlrc</SPAN>文件</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>vi /etc/authlib/authmysqlrc</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">将其内容清空，然后增加如下内容：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_SERVER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
localhost</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_USERNAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_PASSWORD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_SOCKET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
/var/lib/mysql/mysql.sock</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_PORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3306</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_OPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_DATABASE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_USER_TABLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
mailbox</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_CRYPT_PWFIELD&nbsp;&nbsp;&nbsp;&nbsp; 
password</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_UID_FIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
uidnumber</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_GID_FIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
gidnumber</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_LOGIN_FIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
username</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_HOME_FIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
homedir</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_NAME_FIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
name</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_MAILDIR_FIELD&nbsp;&nbsp;&nbsp;&nbsp; 
maildir</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_QUOTA_FIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
quota</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">MYSQL_SELECT_CLAUSE&nbsp;&nbsp;&nbsp;&nbsp; 
SELECT username,password,"",uidnumber,gidnumber,\</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
CONCAT('/home/domains/',homedir),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
\</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
CONCAT('/home/domains/',maildir),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
\</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
quota,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
\</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
\</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
FROM 
mailbox&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
\</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
WHERE username = '$(local_part)@$(domain)'</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">存盘退出后启动<SPAN 
lang=EN-US>courier-authlib</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/courier-authlib start </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如一切正常，命令行将返回如下信息：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Starting Courier authentication services: authdaemond 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">修改<SPAN lang=EN-US>authdaemon 
socket</SPAN>目录权限</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN 
style="FONT-FAMILY: 宋体">如果该目录权限不正确修改，<SPAN lang=EN-US>maildrop</SPAN>及<SPAN 
lang=EN-US>postfix</SPAN>等将无法正确获取用户的信息及密码认证：<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">chmod 755 /var/spool/authdaemon</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">修改<SPAN 
lang=EN-US>/etc/authlib/</SPAN><SPAN 
lang=EN-US>authdaemonrc</SPAN>文件，</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>vi /etc/authlib/</SPAN><SPAN 
lang=EN-US>authdaemonrc</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">修改内容以下：<SPAN 
lang=EN-US><BR>
    <BR>
    </SPAN>详细内容：<SPAN lang=EN-US><BR>authmodulelist=" authpam 
    authpgsql authldap authmysql authcustom authpipe"<BR>
    </SPAN>更改为：<SPAN 
lang=EN-US><BR>authmodulelist="authmysql"<BR><BR>authmodulelistorig="authpam 
    authpgsql authldap authmysql authcustom authpipe"<BR>
    </SPAN>更改为：<SPAN 
lang=EN-US><BR>authmodulelistorig="authmysql"<BR><BR>daemons=5<BR>
  </SPAN>更改为：<SPAN 
lang=EN-US><BR>daemons=10</SPAN></SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=maildrop></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">安装<SPAN 
lang=EN-US>Maildrop</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意事项：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">1.</SPAN></B><SPAN 
style="FONT-FAMILY: 宋体">如果您需要重新编译<SPAN 
lang=EN-US>maildrop</SPAN>软件包，首先必须获得其源码<SPAN lang=EN-US>rpm</SPAN>包，其次必须先装好<SPAN 
lang=EN-US>courier-authlib</SPAN>及其<SPAN lang=EN-US>devel</SPAN>软件包，否则编译<SPAN 
lang=EN-US>maildrop</SPAN>之后将无法打开<SPAN lang=EN-US>authlib</SPAN>支持。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">2.</SPAN></B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">maildrop RPM</SPAN><SPAN 
style="FONT-FAMILY: 宋体">包安装时，会自动创建<SPAN lang=EN-US>vuser</SPAN>用户及<SPAN 
lang=EN-US>vgroup</SPAN>用户组，专门用于邮件的存储，<SPAN lang=EN-US>vuser:vgroup</SPAN>的<SPAN 
lang=EN-US>uid/gid</SPAN>都是<SPAN lang=EN-US>1000</SPAN>，这与一般的邮件文档中提及用<SPAN 
lang=EN-US>postfix</SPAN>用户存邮件不一样。因为<SPAN lang=EN-US>postfix</SPAN>用户的<SPAN 
lang=EN-US>uid</SPAN>一般都低于<SPAN lang=EN-US>500</SPAN>，而<SPAN 
lang=EN-US>Suexec</SPAN>模块编译时对<SPAN lang=EN-US>UID/GID</SPAN>的要求是要大于<SPAN 
lang=EN-US>500</SPAN>，因此显然用<SPAN 
lang=EN-US>postfix</SPAN>用户不能满足，会导致报错。其次，如果用<SPAN 
lang=EN-US>maildrop</SPAN>作为投递（<SPAN lang=EN-US>MDA</SPAN>），以<SPAN 
lang=EN-US>postfix</SPAN>身份投递的话，<SPAN lang=EN-US>postfix 
mta</SPAN>也会报错的。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">编译<SPAN 
lang=EN-US>Maildrop</SPAN>：</SPAN></B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">首先从：<SPAN 
lang=EN-US>http://postfix.org.cn/download/maildrop-2.0.1-1hzq.src.rpm 
</SPAN>下载<SPAN lang=EN-US>maildrop</SPAN>的<SPAN 
lang=EN-US>src</SPAN>包，然后重新编译：<SPAN lang=EN-US><BR>rpmbuild --rebuild 
maildrop-2.0.1-1hzq.src.rpm<BR></SPAN>编译结束后，将在<SPAN 
lang=EN-US>/usr/src/redhat/RPMS/x86_64</SPAN>生成：<SPAN 
lang=EN-US><BR>maildrop-2.0.1-1hzq.x86_64.rpm<BR>maildrop-man-2.0.1-1hzq.x86_64.rpm</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">安装<SPAN lang=EN-US>maildrop</SPAN></SPAN></B></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-size: 12pt; color: #FF0000;" 
align=left><SPAN 
style="FONT-FAMILY: 宋体">yum -y install gamin</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
  RPMS/maildrop-2.0.1-1hzq.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/maildrop-man-2.0.1-1hzq.x86_64.rpm</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">配置<SPAN lang=EN-US>master.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>vi /etc/postfix/master.cf</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">为了使<SPAN lang=EN-US>Postfix</SPAN>支持<SPAN 
lang=EN-US>Maildrop</SPAN>，必须修改<SPAN 
lang=EN-US>/etc/postfix/master.cf</SPAN>文件，</SPAN><SPAN 
style="FONT-FAMILY: 宋体">注释掉原来的<SPAN 
lang=EN-US>maildrop</SPAN>的配置内容，并改为：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">maildrop&nbsp;&nbsp; 
unix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pipe</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">#<SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; </SPAN>flags=DRhu 
user=vmail argv=/usr/local/bin/maildrop -d ${recipient}</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; flags=DRhu 
user=vuser argv=maildrop -w 90 -d ${user}@${nexthop} ${recipient} ${user} 
${extension} {nexthop}</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">配置<SPAN lang=EN-US>main.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>vi /etc/postfix/main.cf</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN 
lang=EN-US>maildrop</SPAN>不支持一次接收多个收件人，因此必须在<SPAN 
lang=EN-US>/etc/postfix/main.cf</SPAN>里增加如下参数：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">maildrop_destination_recipient_limit = 1</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">最后重新启动<SPAN lang=EN-US>postfix</SPAN>即可</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=apache></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Apache</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN lang=EN-US>httpd.conf</SPAN>：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/httpd/conf/httpd.conf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">在<SPAN 
lang=EN-US>730</SPAN>行左右，屏蔽掉<SPAN lang=EN-US>AddDefaultCharset</SPAN>：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">#AddDefaultCharset UTF-8 </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">使<SPAN 
lang=EN-US>apache</SPAN>开机默认启动：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">chkconfig --level 3 httpd on </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">虚拟主机设置</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>/etc/httpd/conf/httpd.conf</SPAN>文件，在最后一行加上：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">NameVirtualHost *:80</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Include 
conf/vhost_*.conf</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>/etc/httpd/conf/vhost_extmail.conf</SPAN>，里面定义虚拟主机的相关内容，包括主目录，以及<SPAN 
lang=EN-US>ExtMail</SPAN>和<SPAN lang=EN-US>ExtMan</SPAN>的相关配置，<SPAN 
lang=EN-US>Suexec</SPAN>的设置等。<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># 
VirtualHost for ExtMail Solution</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&lt;VirtualHost *:80&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">ServerName 
mail.lunsou.com</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">DocumentRoot 
/var/www/extsuite/extmail/html/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">ScriptAlias 
/extmail/cgi/ /var/www/extsuite/extmail/cgi/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Alias 
/extmail/ /var/www/extsuite/extmail/html/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">ScriptAlias 
/extman/cgi/ /var/www/extsuite/extman/cgi/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Alias 
/extman/ /var/www/extsuite/extman/html/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># Suexec 
config</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SuexecUserGroup vuser vgroup</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&lt;/VirtualHost&gt;</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">重新启动<SPAN lang=EN-US>apache: </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/httpd restart</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意：</SPAN></B><SPAN style="FONT-FAMILY: 宋体">此时重新启动<SPAN 
lang=EN-US>apache</SPAN>会产生以下警告信息，可不必理会</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Starting httpd: Warning: DocumentRoot 
[/var/www/extsuite/extmail/html/] does not exist </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=extmail></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">安装<SPAN 
lang=EN-US>ExtMail</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">建立<SPAN 
lang=EN-US>/var/www/extsuite</SPAN>并复制源码到该目录，相关命令：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
/var/www/extsuite</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>cd src </P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>tar zxvf extmail-1\[1\].0beta3.tar.gz </P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>patch -p0 &lt; extmail-1<SPAN class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left">\[1\]</SPAN>.0beta3-all-P3.patch</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>patch -p0 &lt; extmail-1\[1\].0beta3-PPDetector.patch</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>cd .. </P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cp -r 
src/extmail-1.0beta3 /var/www/extsuite/extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
/var/www/extsuite/extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cp 
webmail.cf.default webmail.cf</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
$OLDPWD</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意：</SPAN></B><SPAN 
style="FONT-FAMILY: 宋体">上面命令行中最后一个<SPAN lang=EN-US>cd 
$OLDPWD</SPAN>是返回原始路径（即<SPAN lang=EN-US>ExtMail 
Solution</SPAN>软件包根目录）</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN lang=EN-US>webmail.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">用<SPAN 
lang=EN-US>vi</SPAN>打开<SPAN 
lang=EN-US>/var/www/extsuite/extmail/webmail.cf</SPAN>，并按<SPAN 
lang=EN-US>2</SPAN>次<SPAN lang=EN-US>ESC</SPAN>键以确保进入命令模式，然后输入：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">:1, $ 
s#/var/www/cgi-bin#/var/www/extsuite#g</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">上述命令的作用是将默认路径从<SPAN 
lang=EN-US>/var/www/cgi-bin</SPAN>下换到<SPAN 
lang=EN-US>/var/www/extsuite</SPAN>下，处理完毕后，修改<SPAN 
lang=EN-US>webmail.cf</SPAN>里的其他参数，主要变动的内容见下：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_USER_LANG = zh_CN</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_USER_CHARSET = gb2312</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_MFILTER_ON = 1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_NETDISK_ON = 1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_MYSQL_USER = extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_MYSQL_PASS = extmail </SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_MYSQL_DB = extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_G_ABOOK_TYPE = file</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SYS_G_ABOOK_FILE_CHARSET = 
gb2312</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_SESS_DIR = /tmp/extmail/</SPAN></P>
</DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">其中<SPAN lang=EN-US>SYS_MFILTER_ON</SPAN>及<SPAN 
lang=EN-US>SYS_NETDISK_ON </SPAN>设置为<SPAN 
lang=EN-US>1</SPAN>是为了打开网络磁盘和过滤器。全局地址本默认为<SPAN 
lang=EN-US>ldap</SPAN>格式，现在也改为文本格式，并将地址本的转换编码改为<SPAN lang=EN-US>GB2312,</SPAN></SPAN><SPAN 
style="FONT-FAMILY: 宋体">其他参数基本上可以使用默认值。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; font-family: &quot;宋体&quot;;" align=left>chown -R vuser:vgroup /tmp/extmail</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">更新<SPAN lang=EN-US>cgi</SPAN>目录权限</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN lang=EN-US>SuEXEC</SPAN>的需要，必须将<SPAN 
lang=EN-US>extmail</SPAN>的<SPAN lang=EN-US>cgi</SPAN>目录修改成<SPAN 
lang=EN-US>vuser:vgroup</SPAN>权限：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">chown -R vuser:vgroup /var/www/extsuite/extmail/cgi/ 
</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=extman></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">安装<SPAN 
lang=EN-US>ExtMan - web</SPAN>后台</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">在<SPAN 
lang=EN-US>ExtMail-Solution</SPAN>软件包根目录下执行：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>cd src</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>tar zxvf extman-0\[1\].2beta3.tar.gz</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left>cd .. </P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cp -r 
src/extman-0.2beta3 /var/www/extsuite/extman/</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">配置<SPAN lang=EN-US>webman.cf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">用<SPAN 
lang=EN-US>vi</SPAN>编辑<SPAN 
lang=EN-US>/var/www/extsuite/extman/webman.cf</SPAN>，并连按<SPAN 
lang=EN-US>2</SPAN>次<SPAN lang=EN-US>ESC</SPAN>，确保进入命令模式，然后输入如下命令：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">:1, $ 
s#/var/www/cgi-bin#/var/www/extsuite#g</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">处理完毕后修改<SPAN 
lang=EN-US>SYS_CHARSET</SPAN>及<SPAN lang=EN-US>SYS_LANG</SPAN>参数为：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">SYS_CHARSET = 
gb2312&nbsp;&nbsp; //</SPAN><SPAN 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">新版中不用设置</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">SYS_LANG = 
zh_CN&nbsp;&nbsp; //</SPAN><SPAN 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">新版中不用设置</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_MYSQL_USER = 
webman</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_MYSQL_PASS = 
webman</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_MYSQL_DB = 
extmail</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_MYSQL_HOST = 
localhost</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_MYSQL_SOCKET = 
/var/lib/mysql/mysql.sock</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">## SYS_SESS_DIR = 
/home/tmp/extman/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">SYS_SESS_DIR = /tmp/extman/</SPAN></P>
</DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">其他参数基本上可以使用默认值。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; font-family: &quot;宋体&quot;;" align=left>chown -R vuser:vgroup /tmp/extman</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">更新<SPAN lang=EN-US>cgi</SPAN>目录权限</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN lang=EN-US>SuEXEC</SPAN>的需要，必须将<SPAN 
lang=EN-US>extman</SPAN>的<SPAN lang=EN-US>cgi</SPAN>目录修改成<SPAN 
lang=EN-US>vuser:vgroup</SPAN>权限：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">chown -R vuser:vgroup /var/www/extsuite/extman/cgi/ 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">确认<SPAN lang=EN-US>MySQL</SPAN>状态</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">在执行<SPAN 
lang=EN-US>mysql</SPAN>操作前，必须确认它已被正确安装并启动，可以用<SPAN 
lang=EN-US>rpm</SPAN>命令查询<SPAN lang=EN-US>mysql server</SPAN>的安装情况，用<SPAN 
lang=EN-US>ps ax</SPAN>的办法查看进程列表是否有<SPAN lang=EN-US>mysqld</SPAN>进程：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -aq|grep -i mysql-server </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">正常情况下应该可以看到<SPAN 
lang=EN-US>mysql-server</SPAN>被安装：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">mysql-server-4.1.12-3.RHEL4.1 </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果没有，则表示没有安装好<SPAN 
lang=EN-US>mysql-server</SPAN>，可以从本软件包<SPAN 
lang=EN-US>RPMS</SPAN>目录里安装，也可以找安装光盘安装：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -ivh RPMS/mysql-server-4.1.12-3.RHEL4.1.x86_64.rpm 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">安装完毕后必须初始化<SPAN 
lang=EN-US>mysql</SPAN>，然后重新启动</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/usr/bin/mysql_install_db</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/etc/init.d/mysqld 
start</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">正常情况下将启动成功：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Starting 
MySQL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
[&nbsp; <SPAN style="COLOR: green">OK</SPAN>&nbsp; ]</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后用<SPAN lang=EN-US>ps</SPAN>命令来检查<SPAN 
lang=EN-US>mysqld</SPAN>是否正确运行：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">ps ax|grep mysqld </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">正常情况下应出现如下的结果：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">433 pts</SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/0 S 0:00 /bin/sh /usr/bin/mysqld_safe 
--defaults-file=/etc/my.cnf --pid-file=/var/run/mysqld/mysqld.pid<BR>466 pts/0 
Sl 0:00 /usr/libexec/mysqld --defaults-file=/etc/my.cnf --basedir=/usr 
--datadir=/var/lib/mysql --user=mysql --pid-file=/var/run/mysqld/mysqld.pid 
--skip-locking --socket=/var/lib/mysql/mysql.sock </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果<SPAN lang=EN-US>mysql</SPAN>没正确启动，请检查<SPAN 
lang=EN-US>/var/log/mysqld.log</SPAN>里面的出错提示，进行处理：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">tail /var/log/mysqld.log </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">数据库初始化</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">执行以下命令导入<SPAN 
lang=EN-US>mysql</SPAN>数据库结构及初始化数据，<B>注意必须逐行输入以下命令，<SPAN 
lang=EN-US>root</SPAN>密码默认为空</B>，不可直接用鼠标复制两行命令直接输入，否则会报错！</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mysql -u 
root -p &lt; /var/www/extsuite/extman/docs/extmail.sql</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mysql -u 
root -p &lt; /var/www/extsuite/extman/docs/init.sql</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">链接基本库到<SPAN lang=EN-US>Extmail</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">由于<SPAN 
lang=EN-US>ExtMan</SPAN>的体系与<SPAN lang=EN-US>ExtMail</SPAN>比较类似，因此<SPAN 
lang=EN-US>ExtMan</SPAN>需要使用<SPAN lang=EN-US>ExtMail</SPAN>中几个基础<SPAN 
lang=EN-US>perl </SPAN>模块，在<SPAN lang=EN-US>extman</SPAN>的源码包里，包含了一个叫<SPAN 
lang=EN-US>buildlink.sh </SPAN>的小脚本，该脚本完成了这些链接的工作，使用方法：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
/var/www/extsuite/extman/libs/Ext</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">./buildlink.sh build 
/var/www/extsuite/extmail/libs/Ext</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir -p 
/home/tmp/extman</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">chown -R 
vuser:vgroup /home/tmp/extman</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
$OLDPWD</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">操作完毕后，需要建立刚才导入<SPAN lang=EN-US>mysql</SPAN>的<SPAN 
lang=EN-US>test@extmail.org</SPAN>帐户的<SPAN 
lang=EN-US>Maildir</SPAN>，请输入如下命令：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
/var/www/extsuite/extman/tools</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">./maildirmake.pl 
/home/domains/extmail.org/test/Maildir</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">chown -R 
vuser:vgroup /home/domains/extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
$OLDPWD</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意事项：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">上面命令行中最后一个<SPAN lang=EN-US>cd 
$OLDPWD</SPAN>是返回原始路径（即<SPAN lang=EN-US>ExtMail 
Solution</SPAN>软件包根目录）</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN lang=EN-US>RedHat</SPAN>发行版中包含了一个叫<SPAN 
lang=EN-US>tmpwatch</SPAN>的工具，该工具会定期扫描<SPAN 
lang=EN-US>/tmp/</SPAN>下的文件，如果这些文件很久都没被使用，将被删除，因此如果后台长期不使用，<SPAN 
lang=EN-US>/tmp/extman</SPAN>目录有可能被<SPAN 
lang=EN-US>tmpwatch</SPAN>删除，所以要么定期登陆后台，要么修改<SPAN lang=EN-US> 
webman.cf</SPAN>将临时目录修改到另一个地方。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">上述导入初始化<SPAN lang=EN-US>SQL</SPAN>时，默认的<SPAN 
lang=EN-US>uidnumber/gidnumber</SPAN>都是<SPAN lang=EN-US>1000</SPAN>，这和<SPAN 
lang=EN-US>vuser:vgroup </SPAN>的<SPAN lang=EN-US>uid/gid</SPAN>一致，是因为<SPAN 
lang=EN-US>maildrop</SPAN>投递时会从数据库里取<SPAN 
lang=EN-US>uidnumber/gidnumber</SPAN>，而在<SPAN 
lang=EN-US>master.cf</SPAN>里已经定义好了投递时的运行身份（<SPAN 
lang=EN-US>vuser:vgroup</SPAN>），所以这两个字段的内容必须为<SPAN 
lang=EN-US>1000</SPAN>，否则将出现投递错误，例如报<SPAN lang=EN-US>0x06</SPAN>等错误。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">测试<SPAN lang=EN-US>authlib</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">在命令行下执行：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/usr/sbin/authtest -s login test@extmail.org test 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">结果如下：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Authentication succeeded.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp; Authenticated: 
test@extmail.org&nbsp; (uid 1000, gid 1000)</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; Home Directory: 
/home/domains/extmail.org/test</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Maildir: /home/domains/extmail.org/test/Maildir/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Quota: 5242880</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Encrypted 
Password: {crypt}uywiuN.XggXXc</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Cleartext 
Password: test</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Options: (none)</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">这样表明<SPAN lang=EN-US>ExtMan</SPAN>的正确安装，数据库也正确导入，<SPAN 
lang=EN-US>courier-authlib</SPAN>能正确连接到<SPAN 
lang=EN-US>mysql</SPAN>数据库</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">最后访问<SPAN lang=EN-US><A 
href="http://mail.extmail.org/extmail/">http://mail.extmail.org/extmail/</A></SPAN>，如无意外，将看到<SPAN 
lang=EN-US>webmail</SPAN>的登陆页，不过此时还没有加正式的用户，所以不能登陆，包括<SPAN 
lang=EN-US>test@extmail.org</SPAN>也不行。必须要登陆到<SPAN lang=EN-US><A 
href="http://mail.extmail.org/extman/">http://mail.extmail.org/extman/</A> 
</SPAN>里增加一个新帐户才能登陆。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">ExtMan</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的默认超级管理员帐户是<SPAN 
lang=EN-US>root@extmail.org</SPAN>，密码是<SPAN 
lang=EN-US>extmail</SPAN>，登陆成功后，建议将密码修改，以确保安全。</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=mailgraph_ext></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Mailgraph_ext</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">自<SPAN lang=EN-US>ExtMan 0.14-pre2 </SPAN>开始，系统集成了<SPAN 
lang=EN-US>Mailgraph_ext</SPAN>插件，该插件使<SPAN 
lang=EN-US>extman</SPAN>具备图形化显示邮件日志的能力。<SPAN 
lang=EN-US>mailgraph_ext</SPAN>融合了<SPAN lang=EN-US>mailgraph</SPAN>和<SPAN 
lang=EN-US>queuegraph</SPAN>两个软件包，除增加了更多的日志分析及图形显示能力外，还重写了<SPAN 
lang=EN-US>web</SPAN>模块，集成到<SPAN 
lang=EN-US>ExtMan</SPAN>后台里，这样邮件日志将只能给经过授权的用户查看，提高了安全性。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">mailgraph_ext</SPAN><SPAN style="FONT-FAMILY: 宋体">及<SPAN 
lang=EN-US>Extman</SPAN>都需要安装<SPAN lang=EN-US>rrdtool</SPAN>工具</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">必需的软件包</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">- Perl 5.6+ 
(</SPAN><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">建议<SPAN 
lang=EN-US>5.8</SPAN>以上<SPAN lang=EN-US>)</SPAN></SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">- rrdtool 
</SPAN><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">及<SPAN 
lang=EN-US>rrdtool</SPAN>的<SPAN lang=EN-US>perl</SPAN>包，地址：</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; <A 
href="http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/">http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/</A></SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">- 
File::Tail (</SPAN><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">还需要<SPAN 
lang=EN-US>Time::HiRes</SPAN>模块<SPAN lang=EN-US>)</SPAN></SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体; color: #FF0000;">##</SPAN>  RHEL/CentOS</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一般自带了<SPAN 
lang=EN-US>perl-Time-HiRes(1.5x)</SPAN>所以以下的<SPAN 
lang=EN-US>rpm</SPAN>安装也许会报错（提示冲突），可以不必理会。如果想安装本文所带的新版<SPAN 
lang=EN-US>Time-HiRes</SPAN>模块，可以用如下命令删除系统自带的包：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><span class="style1">##</span> rpm -e perl-Time-HiRes --nodeps</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">到</SPAN><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"><A 
href="http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/">http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/</A></SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">下载以下软件包：<SPAN 
lang=EN-US><BR>rrdtool-1.2.15-1.el4.rf.x86_64.rpm<BR>perl-rrdtool-1.2.15-1.el4.rf.x86_64.rpm</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">到<SPAN lang=EN-US>rpmfind.net</SPAN>下载：<SPAN 
lang=EN-US><BR>perl-File-Tail-0.99.3-1.2.el4.rf.noarch.rpm<BR>perl-Time-HiRes-1.65-1.x86_64.rpm</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">安装依赖包<SPAN lang=EN-US>/RRDtool</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 13pt; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; color: #FF0000;" 
align=left><SPAN 
style="FONT-FAMILY: 宋体">yum -y install libart_lgpl</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh RPMS/rrdtool-1.2.15-1.el4.rf.x86_64.rpm RPMS/perl-rrdtool-1.2.15-1.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; color: #FF0000;" 
align=left><SPAN 
style="FONT-FAMILY: 宋体">yum -y install perl-Time-HiRes</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh RPMS/perl-File-Tail-0.99.3-1.2.el4.rf.noarch.rpm</SPAN></P>
</DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">复制<SPAN lang=EN-US>mailgraph_ext</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">执行以下命令：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">cp -r /var/www/extsuite/extman/addon/mailgraph_ext/ 
/usr/local/mailgraph_ext/ </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><B><SPAN 
style="FONT-FAMILY: 宋体">注意事项：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">本文使用<SPAN lang=EN-US>qmonitor</SPAN>来搜集队列数据，而不是使用<SPAN 
lang=EN-US>crontab</SPAN>来定时提取，这与官方网站上的文档有差异。使用<SPAN 
lang=EN-US>qmonitor</SPAN>的好处是它实时的监视队列目录的变化，显示的结果更加精确。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">启动进程</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">启动<SPAN lang=EN-US>mailgraph_ext</SPAN>及<SPAN 
lang=EN-US>qmonitor</SPAN>：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/usr/local/mailgraph_ext/mailgraph-init 
start</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/usr/local/mailgraph_ext/qmonitor-init 
start</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">加入自启动</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN 
style="FONT-FAMILY: 宋体">为了一开机就能自动执行上述进程，将上述命令加到<SPAN lang=EN-US>rc.local 
</SPAN>里面：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">echo 
"/usr/local/mailgraph_ext/mailgraph-init start" &gt;&gt; 
/etc/rc.d/rc.local</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">echo 
"/usr/local/mailgraph_ext/qmonitor-init start" &gt;&gt; 
/etc/rc.d/rc.local</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">使用方法</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">等待大约<SPAN 
lang=EN-US>15</SPAN>分钟左右，如果邮件系统有一定的流量，即可登陆到<SPAN 
lang=EN-US>extman</SPAN>里，点<SPAN lang=EN-US>“</SPAN>图形日志<SPAN 
lang=EN-US>”</SPAN>即可看到图形化的日志。具体每天，周，月，年的则点击相应的图片进入即可。<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=sasl></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Cyrus-SASL </SPAN>认证</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">RHEL4/CentOS4</SPAN><SPAN style="FONT-FAMILY: 宋体">的<SPAN 
lang=EN-US>cyrus-sasl</SPAN>默认没有打开<SPAN 
lang=EN-US>authdaemon</SPAN>的支持，为了使用集中认证的<SPAN 
lang=EN-US>authlib</SPAN>，必须打开这个支持。为此我们必须删除系统的<SPAN 
lang=EN-US>cyrus-sasl</SPAN>软件包，替换成打开了<SPAN lang=EN-US>authdaemon</SPAN>支持的<SPAN 
lang=EN-US>sasl</SPAN>软件包。首先要删除系统老的<SPAN 
lang=EN-US>cyrus-sasl</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -e --nodeps cyrus-sasl </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">编译<SPAN 
lang=EN-US>Cyrus-SASL</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">到：<SPAN 
lang=EN-US>http://www.extmail.org/source/cyrus-sasl-2.1.19-5.EL4.src.rpm</SPAN>下载<SPAN 
lang=EN-US>src</SPAN>包，然后：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="COLOR: red; FONT-FAMILY: 宋体">rpmbuild --rebuild 
cyrus-sasl-2.1.19-5.EL4.src.rpm</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">在<SPAN 
lang=EN-US>/usr/src/redhat/RPMS/x86_64</SPAN>下生成：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="COLOR: red; FONT-FAMILY: 宋体">cyrus-sasl-2.1.19-5.EL4.x86_64.rpm</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后安装新的支持<SPAN 
lang=EN-US>authdaemon</SPAN>的软件包</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -ivh RPMS/cyrus-sasl-2.1.19-5.EL4.x86_64.rpm 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Postfix</SPAN><SPAN style="FONT-FAMILY: 宋体">的<SPAN 
lang=EN-US>SMTP</SPAN>认证需要透过<SPAN lang=EN-US>Cyrus-SASL</SPAN>，连接到<SPAN 
lang=EN-US>authdaemon</SPAN>获取认证信息，编辑<SPAN 
lang=EN-US>/etc/postfix/main.cf (vi <SPAN style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>/etc/postfix/main.cf</SPAN></SPAN>)</SPAN>，增加如下内容：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># smtpd 
related config</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_recipient_restrictions 
=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; 
permit_mynetworks,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
permit_sasl_authenticated,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reject_non_fqdn_hostname,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reject_non_fqdn_sender,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reject_non_fqdn_recipient,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reject_unauth_destination,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reject_unauth_pipelining,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reject_invalid_hostname,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># SMTP AUTH 
config here</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">broken_sasl_auth_clients = 
yes</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_sasl_auth_enable = yes</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_sasl_local_domain = 
$myhostname</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_sasl_security_options = 
noanonymous</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">其次编辑<SPAN 
lang=EN-US>/usr/<SPAN 
style="COLOR: red">lib64</SPAN>/sasl2/smtpd.conf (<SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>vi /usr/<SPAN 
style="COLOR: #000000">lib64</SPAN>/sasl2/smtpd.conf</SPAN></SPAN>) </SPAN>，确保其内容为：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">特别注意：因为是<SPAN 
lang=EN-US>x86_64</SPAN>系统，所以<SPAN lang=EN-US>smtpd.conf</SPAN>的位置是<SPAN 
lang=EN-US>/usr/lib64/sasl2/</SPAN>下，而不是<SPAN 
lang=EN-US>/usr/lib/sasl2</SPAN>下。</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">pwcheck_method: authdaemond</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">log_level: 
3</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mech_list: 
PLAIN LOGIN</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">authdaemond_path:/var/spool/authdaemon/socket</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">存盘退出后，重新启动<SPAN lang=EN-US>postfix</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/postfix restart </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">测试<SPAN lang=EN-US>SMTP</SPAN>认证</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">通过以下命令获得<SPAN 
lang=EN-US>test@extmail.org</SPAN>的用户名及密码的<SPAN 
lang=EN-US>BASE64</SPAN>编码：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">perl -e 
'use MIME::Base64; print encode_base64("test\@extmail.org")'</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">dGVzdEBleHRtYWlsLm9yZw==</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">perl -e 
'use MIME::Base64; print encode_base64("test")'</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">dGVzdA==</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后本机测试，其过程如下（蓝色的文字是我们输入<SPAN lang=EN-US>/</SPAN>发送到<SPAN 
lang=EN-US>Postfix</SPAN>的）</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">telnet localhost 
25</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Trying 
127.0.0.1...</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connected 
to localhost.localdomain (127.0.0.1).</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Escape 
character is '^]'.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">220 
mail.extmail.org ESMTP Postfix - by extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">ehlo 
demo.domain.tld</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-mail.extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-PIPELINING</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-SIZE 
10240000</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-VRFY</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-ETRN</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-AUTH 
LOGIN PLAIN</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-AUTH=LOGIN PLAIN</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-ENHANCEDSTATUSCODES</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250-8BITMIME</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 
DSN</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">auth login</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">334 
VXNlcm5hbWU6</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">dGVzdEBleHRtYWlsLm9yZw==</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">334 
UGFzc3dvcmQ6</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">dGVzdA==</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">235 2.0.0 
Authentication successful</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">quit</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">221 2.0.0 
Bye</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">最后出现<SPAN lang=EN-US>235 Authentication Successful 
</SPAN>表明认证成功了。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=imap></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">安装<SPAN 
lang=EN-US>Courier-IMAP</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">编译<SPAN 
lang=EN-US>Courier-IMAP:</SPAN>转移到后面的编译<SPAN 
lang=EN-US>courier-imap</SPAN>部分。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">用以下命令安装<SPAN lang=EN-US>courier-imap</SPAN>的<SPAN 
lang=EN-US>rpm</SPAN>包，默认的<SPAN lang=EN-US>courier-authlib</SPAN>及<SPAN 
lang=EN-US>courier-imap</SPAN>都会增加系统自启动设置，因此下一次服务器启动将自动启动相应的<SPAN 
lang=EN-US>authlib</SPAN>及<SPAN lang=EN-US>POP3</SPAN>服务</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -ivh RPMS/courier-imap-4.1.0-1.x86_64.rpm</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">配置<SPAN lang=EN-US>courier-imap</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN lang=EN-US>Courier-imap</SPAN>的<SPAN 
lang=EN-US>IMAP</SPAN>目录是按<SPAN lang=EN-US>UTF-7</SPAN>编码的，<B><I><SPAN 
lang=EN-US>ExtMail</SPAN>目前还没有正式支持<SPAN lang=EN-US>IMAP</SPAN>目录，因此需要屏蔽<SPAN 
lang=EN-US>IMAP</SPAN>，只提供<SPAN 
lang=EN-US>pop3</SPAN>服务</I></B>。而就目前的使用情况来看，<SPAN 
lang=EN-US>IMAP</SPAN>使用的非常少，绝大部分<SPAN 
lang=EN-US>OutLook/Foxmail</SPAN>用户都习惯使用<SPAN lang=EN-US>POP3</SPAN>而非<SPAN 
lang=EN-US>IMAP</SPAN>。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /usr/lib/courier-imap/etc/imapd</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">将如下这行配置：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">IMAPDSTART=YES </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">替换成为：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">IMAPDSTART=NO</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /usr/lib/courier-imap/etc/imapd-ssl</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">再将如下配置：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">IMAPDSSLSTART=YES </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">替换成为：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">IMAPDSSLSTART=NO </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后启动<SPAN lang=EN-US>courier-imap</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/courier-imap start </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">测试<SPAN lang=EN-US>POP3</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">请按如下步骤输入<SPAN 
lang=EN-US>pop3</SPAN>命令测试其是否正常工作，注意蓝色的信息是我们输入到<SPAN 
lang=EN-US>POP3</SPAN>服务器的</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">telnet localhost 
110</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Trying 
127.0.0.1...</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connected 
to localhost.localdomain (127.0.0.1).</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Escape 
character is '^]'.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">+OK Hello 
there.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">user 
test@extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">+OK 
Password required.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">pass test</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">+OK logged 
in.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">list</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">+OK POP3 
clients that break here, they violate STD53.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">quit</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">+OK 
Bye-bye.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connection 
closed by foreign host.</SPAN></P></DIV>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=filter></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">反病毒<SPAN 
lang=EN-US>/</SPAN>内容过滤配置</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">反病毒及内容过滤器是依赖<SPAN 
lang=EN-US>Amavisd-new</SPAN>软件包，它是一个多功能的过滤器，能与杀毒软件及内容过滤软件（如<SPAN 
lang=EN-US>SpamAssassin</SPAN>）结合，通用性较强。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=filter_prepare></A><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">安装依赖的<SPAN 
lang=EN-US>Perl</SPAN>包</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">首先我们要确保系统自带的<SPAN 
lang=EN-US>perl-Net-DNS</SPAN>软件包被删除干净，因为该包的版本较低（<SPAN 
lang=EN-US>0.48</SPAN>），有已知的<SPAN lang=EN-US>bug</SPAN>，所以必须替换成本文档提供的新版（<SPAN 
lang=EN-US>0.5x</SPAN>），输入如下命令：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpm -e --nodeps perl-Net-DNS </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Amavisd-new </SPAN><SPAN style="FONT-FAMILY: 宋体">及<SPAN 
lang=EN-US>SpamAssassin</SPAN>需要依赖大量的第三方<SPAN 
lang=EN-US>perl</SPAN>软件包，下列要安装的部分<SPAN 
lang=EN-US>RPM</SPAN>在上述的操作中已经安装了，为了给出较明确的依赖关系，我们依然将这些包的名称列出，<B><I>如果安装时提示有安装包已安装过，或者提示冲突，请不必惊慌</I></B>。请安装如下的<SPAN 
lang=EN-US>RPM</SPAN>软件包：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN style="COLOR: red; FONT-FAMILY: 宋体">以下软件包来源<SPAN 
lang=EN-US>rpmfind.net</SPAN></SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Digest-SHA1-2.07-5.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Digest-HMAC-1.01-13.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Net-IP-1.25-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm --nodeps -ivh 
RPMS/perl-Net-DNS-0.59-1.fc3.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Time-HiRes-1.65-1.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-HTML-Tagset-3.03-30.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-HTML-Parser-3.35-6.x86_64.rpm&nbsp;&nbsp;&nbsp; </SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/spamassassin-3.1.7-1.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-IO-stringy-2.110-1.2.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-IO-Multiplex-1.08-3.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="COLOR: red; FONT-FAMILY: 宋体">Net_SSLeay.pm</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">包无法从<SPAN 
lang=EN-US>rpmfind.net</SPAN>获得，需要通过源码安装，到<SPAN lang=EN-US><A 
href="http://www.cpan.org/"><SPAN 
style="COLOR: red">http://www.cpan.org</SPAN></A></SPAN>下载编译：</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">tar zxvf 
Net_SSLeay.pm-1.30.tar.gz</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">perl 
Makefile.PL</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">make</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">make 
test</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">make 
install</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><S><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Net_SSLeay.pm-1.30-el4.rf.x86_64.rpm</SPAN></S></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-IO-Socket-SSL-1.01-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Net-Server-0.94-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Unix-Syslog-0.100-1.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-TimeDate-1.16-1.2.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-MailTools-1.74-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="COLOR: red; FONT-FAMILY: 宋体">MIME-Base64</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">包无法从<SPAN 
lang=EN-US>rpmfind.net</SPAN>获得，需要通过源码安装，到<SPAN lang=EN-US><A 
href="http://www.cpan.org/"><SPAN 
style="COLOR: red">http://www.cpan.org</SPAN></A></SPAN>下载编译：</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">tar zxvf 
MIME-Base64-3.07.tar.gz</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">perl 
Makefile.PL</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">make</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">make 
test</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">make 
install</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><S><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">rpm -ivh 
--force RPMS/perl-MIME-Base64-3.05-1hzq.i386.rpm</SPAN></S></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Convert-BinHex-1.119-2.2.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-MIME-tools-5.420-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-BerkeleyDB-0.31-1.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Convert-TNEF-0.17-3.2.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Convert-UUlib-1.051-1.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Compress-Zlib-1.42-1.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Archive-Zip-1.16-1.2.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-IO-Zlib-1.04-1.2.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Archive-Tar-1.30-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/arc-5.21j-0.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/zoo-2.10-2.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/unarj-2.63-0.a.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN style="COLOR: red; FONT-FAMILY: 宋体">以下内容新增：</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN style="COLOR: red; FONT-FAMILY: 宋体">安装支持扩展名为<SPAN 
lang=EN-US>.lzo</SPAN>的解码模块：</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">rpm -ivh 
    <SPAN lang=EN-US style="FONT-FAMILY: 宋体">RPMS/</SPAN>lzo-1.08-4.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">rpm -ivh 
    <SPAN lang=EN-US style="FONT-FAMILY: 宋体">RPMS/</SPAN>lzop-1.01-1.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN style="COLOR: red; FONT-FAMILY: 宋体">## 安装支持扩展名为<SPAN 
lang=EN-US>rar</SPAN>的解码模块：</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">## rpm -ivh 
    <SPAN lang=EN-US style="FONT-FAMILY: 宋体">RPMS/</SPAN>compat-libstdc++-33-3.2.3-47.3.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="COLOR: red; FONT-FAMILY: 宋体">## rpm -ivh 
    <SPAN lang=EN-US style="FONT-FAMILY: 宋体">RPMS/</SPAN>rar-3.5.1-1.2.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-family: &quot;宋体&quot;; color: red;" 
align=left> 建议用源码安装（by Bluedata）</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-family: &quot;宋体&quot;; color: red;" 
align=left>tar zxvf rarlinux-3.5.1.tar.gz</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-family: &quot;宋体&quot;; color: red;" 
align=left>cd rar</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-family: &quot;宋体&quot;; color: red;" 
align=left>vi Makefile</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-family: &quot;宋体&quot;; color: red;" 
align=left>把 PREFIX=/usr/local 改为：PREFIX=/usr</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; font-family: &quot;宋体&quot;; color: red;" 
align=left>make install</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">export LANG=C</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/amavisd-new-2.4.0-1hzq.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">chown amavis.amavis 
/var/spool/vscan/db</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">chkconfig --add 
amavisd</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">修改<SPAN 
lang=EN-US>/etc/amavisd.conf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left; font-family: &quot;Times New Roman&quot;, Times, serif;" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/amavisd.conf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">修改的主要参数如下，请逐一对照后修改：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left; color: #FF0000;" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">## $max_servers = 10;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$sa_spam_subject_tag = '[SPAM] 
';</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$mydomain = 
'mail.extmail.org';</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$myhostname 
= 'mail.extmail.org';</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">@local_domains_maps = qw(.);</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$sa_tag2_level_deflt = 5.0;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$sa_kill_level_deflt = 
5.0;</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意事项：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">1</SPAN><SPAN style="FONT-FAMILY: 宋体">）上述<SPAN 
lang=EN-US>$mydomain</SPAN>参数与<SPAN 
lang=EN-US>$myhostname</SPAN>参数相同，主要是为了方便之后的病毒<SPAN 
lang=EN-US>/</SPAN>垃圾汇报邮件发给系统管理员时，能投递到本地的别名里，再转交到虚拟域的特定用户。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">增加如下参数（默认<SPAN 
lang=EN-US>amavisd.conf</SPAN>没有）：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$sa_spam_modifies_subj = 0; # don't 
modify subject</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$remove_existing_x_scanned_headers= 1; 
# remove existing headers</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$remove_existing_spam_headers = 
1;</SPAN></P></DIV>
<P class=MsoNormal><SPAN lang=EN-US style="COLOR: red"></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US style="COLOR: red">2</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">）如果要允许扩展名为</SPAN><SPAN lang=EN-US 
style="COLOR: red">zip|rar|arc|arj|zoo</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">通过，则需要修改</SPAN><SPAN lang=EN-US 
style="COLOR: red">/etc/amavisd.conf</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">，把</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US style="COLOR: red"># [ 
qr'^\.(zip|rar|arc|arj|zoo)$'=&gt; 0 ], # allow any within such 
archives</SPAN></P>
<P class=MsoNormal><SPAN style="COLOR: red; FONT-FAMILY: 宋体">前的</SPAN><SPAN 
lang=EN-US style="COLOR: red">#</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">去掉就行了。如果需要其他扩展名，例如</SPAN><SPAN lang=EN-US 
style="COLOR: red">exe</SPAN><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">，则只要加入即可。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>SpamAssassin</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Amavisd-new </SPAN><SPAN style="FONT-FAMILY: 宋体">通过<SPAN 
lang=EN-US>Mail::SpamAssassin </SPAN>模块来调用<SPAN 
lang=EN-US>SA</SPAN>的功能，因此这里配置<SPAN lang=EN-US>SA</SPAN>和常规配置<SPAN 
lang=EN-US>SA</SPAN>软件有些区别，主要集中在修改<SPAN 
lang=EN-US>local.cf</SPAN>文件上。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>/etc/mail/spamassassin/local.cf</SPAN>文件</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/mail/spamassassin/local.cf</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">将其内容修改为：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">report_safe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">use_bayes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">auto_learn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">bayes_auto_expire&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">skip_rbl_checks&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">use_razor2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">use_dcc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">use_pyzor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">dns_available&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
no</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">增加<SPAN 
lang=EN-US>Chinese_rules.cf</SPAN>支持</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Chinese_rules.cf</SPAN><SPAN 
style="FONT-FAMILY: 宋体">是教育科研网的反垃圾邮件小组对大量垃圾邮件和正常邮件进行分析后得出的一个关键字<SPAN 
lang=EN-US>/</SPAN>分数规则集，用于处理中文（简体）垃圾邮件还是比较有效的。这里我们通过如下命令增加到系统：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">wget -N -P /usr/share/spamassassin 
www.ccert.edu.cn/spam/sa/Chinese_rules.cf </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于该规则每周更新一次，为了达到最好效果，最好在<SPAN 
lang=EN-US>crontab</SPAN>里增加自动更新的内容，输入：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/usr/bin/crontab -e </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后输入如下的内容：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">0 0 1 * * wget -N -P /usr/share/spamassassin 
www.ccert.edu.cn/spam/sa/Chinese_rules.cf; /etc/init.d/amavisd restart 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">存盘退出即可。最后运行以下调试命令以确认<SPAN 
lang=EN-US>amavisd</SPAN>没有错误：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/usr/sbin/amavisd debug </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果没有异常提示或报错退出则表示一切都正常，按<SPAN 
lang=EN-US>ctrl+c</SPAN>终止，然后正常启动，若提示<SPAN 
lang=EN-US>pid</SPAN>不存在等错误，不必理会，只要最后启动成功即可：<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/amavisd start </SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=filter_clamav></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">安装<SPAN 
lang=EN-US>ClamAV</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">执行如下命令：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: 宋体">安装新的<SPAN 
lang=EN-US>clamAV</SPAN>，原来提供的版本较旧，无法更新病毒库</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/<A 
href="ftp://rpmfind.net/linux/dag/redhat/el4/en/x86_64/dag/RPMS/clamav-db-0.88.7-1.el4.rf.x86_64.rpm"><SPAN 
style="COLOR: windowtext; TEXT-DECORATION: none">clamav-db-0.88.7-1.el4.rf.x86_64.rpm </SPAN></A></SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">RPMS/clamav-0.88.7-1.el4.rf.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">rpm -ivh 
RPMS/clamd-0.88.7-1.el4.rf.x86_64.rpm</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
style="FONT-FAMILY: 宋体"><SPAN lang=EN-US>/etc/clamd.conf (vi /etc/clamd.conf) </SPAN></SPAN>文件，去掉<SPAN 
lang=EN-US> 'LocalSocket /var/run/clamav/clamd.sock'</SPAN>的注释，并注释掉<SPAN 
lang=EN-US> 'TCPSocket 3310'</SPAN>，我们将使用<SPAN lang=EN-US>unix 
socket</SPAN>而不是<SPAN lang=EN-US>TCP</SPAN>，两者不可并存。修改完毕后，保存，变动内容见下：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># Path to a 
local socket file the daemon will listen on.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># Default: 
disabled</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">LocalSocket 
/var/run/clamav/clamd.sock</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">#TCPSocket 
3310</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">将<SPAN lang=EN-US>clamav</SPAN>加到<SPAN 
lang=EN-US>amavis</SPAN>运行组里，并调整目录权限，否则<SPAN lang=EN-US>clamav</SPAN>将无法扫描<SPAN 
lang=EN-US>amavisd-new</SPAN>产生的临时文件</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">gpasswd -a 
clamav amavis</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">usermod -G 
amavis clamav</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">chown 
amavis.amavis /var/spool/vscan</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">chmod 750 
/var/spool/vscan</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">chown 
amavis.amavis /var/spool/vscan/tmp</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">chmod 750 
/var/spool/vscan/tmp</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">默认的<SPAN lang=EN-US>/var/spool/vscan 
</SPAN>目录属性是：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rwx------ amavis.root </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">对于<SPAN lang=EN-US>clamav</SPAN>用户而言，则无任何权限访问该目录，因此<SPAN 
lang=EN-US>maillog</SPAN>里<SPAN lang=EN-US>amavisd-new</SPAN>会提示<SPAN 
lang=EN-US>:</SPAN></SPAN></P>
<P class=MsoNormal style="LINE-HEIGHT: 150%; TEXT-ALIGN: left" align=left><SPAN 
lang=EN-US style="LINE-HEIGHT: 150%; FONT-FAMILY: 宋体">May 19 08:38:53 as3 
amavis[1752]: (01752-01) ask_av (ClamAV-clamd) FAILED - unexpected result: 
/var/spool/vscan/tmp/amavis-20050519T083853-01752/parts: Access denied. 
ERROR\n<BR>May 19 08:38:53 as3 amavis[1752]: (01752-01) WARN: all primary virus 
scanners failed, considering backups </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">启动<SPAN lang=EN-US>ClamAV</SPAN>及<SPAN 
lang=EN-US>freshclam</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">/etc/rc.d/init.d/clamd start</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">freshclam 
--daemon</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">将<SPAN lang=EN-US>freshclam</SPAN>增加到自启动，<SPAN 
lang=EN-US>freshclam</SPAN>是自动更新。</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">输入如下命令，即可使<SPAN 
lang=EN-US>freshclam</SPAN>一开机就实现自启动</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">echo "/usr/bin/freshclam --daemon" &gt;&gt; 
/etc/rc.d/rc.local</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=filter_amavis></A><B><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Amavisd</SPAN>与<SPAN lang=EN-US>Clamav</SPAN>结合</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">为了使<SPAN lang=EN-US>Amavisd-new</SPAN>能与<SPAN 
lang=EN-US>clamav</SPAN>结合，需要修改<SPAN 
lang=EN-US>/etc/amavisd.conf</SPAN>文件，打开<SPAN 
lang=EN-US>clamav</SPAN>的支持代码，vi <SPAN 
lang=EN-US>/etc/amavisd.conf</SPAN> ，大概在<SPAN lang=EN-US>300</SPAN>行左右，去掉<SPAN 
lang=EN-US>clamav</SPAN>的支持代码注释，<B><SPAN style="COLOR: red">并将<SPAN 
lang=EN-US>socket</SPAN>路径改为<SPAN 
lang=EN-US>/var/run/clamav/clamd.sock</SPAN></SPAN></B>，如下：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">['ClamAV-clamd',</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
\&amp;ask_daemon, ["CONTSCAN {}\n", "/var/run/clamav/clamd<SPAN 
style="COLOR: red">.sock</SPAN>"],</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
qr/\bOK$/, qr/\bFOUND$/,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
qr/^.*?: (?!Infected Archive)(.*) FOUND$/ ],</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">在<SPAN lang=EN-US>110</SPAN>行左右，修改投递<SPAN 
lang=EN-US>/</SPAN>拦截的方法：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$final_virus_destiny&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;= D_DISCARD;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$final_banned_destiny&nbsp;&nbsp;&nbsp;&nbsp; 
= D_BOUNCE;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$final_spam_destiny&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
= D_PASS;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">$final_bad_header_destiny = 
D_PASS;</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">注意上述<SPAN lang=EN-US>4</SPAN>个设置中，对<SPAN 
lang=EN-US>spam</SPAN>（垃圾邮件）默认会直接反弹（<SPAN 
lang=EN-US>BOUNCE</SPAN>），现在修改为继续投递（<SPAN lang=EN-US>PASS</SPAN>）但在信头中增加相关<SPAN 
lang=EN-US>X-Spam-Status</SPAN>信息等。这样可以很方便的在<SPAN 
lang=EN-US>extmail</SPAN>中设置将被标记为垃圾邮件的<SPAN lang=EN-US>mail</SPAN>投递到<SPAN 
lang=EN-US>“</SPAN>垃圾邮件箱<SPAN lang=EN-US>”</SPAN>中，便于用户翻查。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">增加邮件别名</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>vi /etc/postfix/aliases</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>/etc/postfix/aliases</SPAN>，增加如下信息，<B>注意：</B>默认的<SPAN 
lang=EN-US>aliases</SPAN>数据库里已有一条<SPAN 
lang=EN-US>virusalert</SPAN>的别名，所以请删除，再输入下面的别名记录，并确保所有记录都是唯一的：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">virusalert:&nbsp;&nbsp;&nbsp; 
root</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">spam.police:&nbsp;&nbsp; 
root</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">postfix:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
test@extmail.org</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体"><BR></SPAN><SPAN style="FONT-FAMILY: 宋体">保存并执行<SPAN 
lang=EN-US>:</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">newaliases</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">生成新的别名数据库，这样所有的重新启动<SPAN lang=EN-US>amavisd</SPAN>：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/rc.d/init.d/amavisd restart </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=filter_mta></A><B><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Postfix </SPAN>集成<SPAN lang=EN-US>amavisd-new</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">vi /etc/postfix/master.cf<BR></SPAN><SPAN 
style="FONT-FAMILY: 宋体">增加如下内容：<SPAN lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">127.0.0.1:10025 inet&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; smtpd</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
content_filter=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
local_recipient_maps=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
relay_recipient_maps=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_restriction_classes=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_client_restrictions=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_helo_restrictions=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_sender_restrictions=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_recipient_restrictions=permit_mynetworks,reject</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
mynetworks=127.0.0.0/8</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
strict_rfc821_envelopes=yes</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_error_sleep_time=0</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_soft_error_limit=1001</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
smtpd_hard_error_limit=1000</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp;&nbsp;&nbsp; -o 
receive_override_options=</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编辑<SPAN 
lang=EN-US>/etc/postfix/main.cf (</SPAN></SPAN>vi <SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>/etc/postfix/main.cf)，增加：</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># 
Content-Filter</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">content_filter = 
smtp:[127.0.0.1]:10024</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">receive_override_options = 
no_address_mappings</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意：</SPAN></B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">receive_override_options </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这里必须增加，禁止地址展开<SPAN 
lang=EN-US>/</SPAN>影射，否则如果遇到别名的时候会引起冗余邮件的产生。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">保存后<SPAN lang=EN-US>/etc/init.d/postfix restart 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=filter_test></A><B><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">测试<SPAN 
lang=EN-US>Clamav</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后输入如下命令： 每输入一行后等待<SPAN lang=EN-US>1</SPAN>秒左右：<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">telnet localhost 
25</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Trying 
127.0.0.1...</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connected 
to localhost.localdomain (127.0.0.1).</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Escape 
character is '^]'.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">220 
mail.extmail.org ESMTP Postfix - by extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">mail 
from:&lt;test@extmail.org&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 2.1.0 
Ok</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">rcpt 
to:&lt;test@extmail.org&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 2.1.5 
Ok</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">data</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">354 End 
data with .</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 2.0.0 
Ok: queued as BC24E85260</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">quit</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">221 2.0.0 
Bye</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connection 
closed by foreign host.</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">在邮件日志里，应该有相应的信息出现：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">May 19 10:11:44 as3 amavis[2770]: (02770-01) Blocked 
INFECTED (Eicar-Test-Signature), -&gt; , quarantine: 
virus-20050519-101144-02770-01, Message-ID: 
&lt;20050519141143.F224828AA8@mail.extmail.org&gt;, Hits: - </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果看到类似这样的日志，表明<SPAN 
lang=EN-US>Clamav+Amavisd-new</SPAN>工作正常。</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=slockd></A><B><SPAN lang=EN-US 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">Spam Locker</SPAN></B><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">配置与安装</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">安装需求</SPAN></B></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">支持<SPAN 
lang=EN-US>Linux / BSD</SPAN>或<SPAN lang=EN-US>Solaris</SPAN>，<SPAN 
lang=EN-US>HP-UX</SPAN>等操作系统</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Perl 
5.6+</SPAN><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">，建议<SPAN 
lang=EN-US>Perl 5.8.0</SPAN>以上</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Net::DNS</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">POSIX</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Fcntl</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Digest::MD5</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Digest::SHA1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Digest::HMAC</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Net::IP</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=slockd_prepare></A><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">解包软件</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">cp -r src/slockd-0.083 /usr/local/slockd </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=spam_prepare></A><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">安装相关<SPAN 
lang=EN-US>Perl</SPAN>模块</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN lang=EN-US>slockd</SPAN>是以<SPAN 
lang=EN-US>smtp</SPAN>特征检测为主的软件，因此很大程度依赖<SPAN lang=EN-US>dns</SPAN>库，必须安装<SPAN 
lang=EN-US>Net::DNS</SPAN>库才能正常工作。除此外还有诸如<SPAN lang=EN-US>HMAC</SPAN>，<SPAN 
lang=EN-US>MD5</SPAN>及<SPAN lang=EN-US>SHA1, Net-IP</SPAN>等模块。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">执行以下命令安装需要的模块，<B>注意：</B>这些模块在上文安装<SPAN 
lang=EN-US>Amavisd-new</SPAN>时已经安装过，这里重复是为了强调<SPAN 
lang=EN-US>slockd</SPAN>依赖这些软件包</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Digest-SHA1-2.07-5.x86_64.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Digest-HMAC-1.01-13.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm -ivh 
RPMS/perl-Net-IP-1.25-1.el4.rf.noarch.rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-FAMILY: 宋体">rpm --nodeps -ivh 
RPMS/perl-Net-DNS-0.59-1.fc3.rf.x86_64.rpm</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>resolv.conf</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">请确认<SPAN lang=EN-US>/etc/resolv.conf</SPAN>里的<SPAN 
lang=EN-US>dns</SPAN>服务器是离你的邮件服务器最近，速度最快的<SPAN lang=EN-US>dns 
server</SPAN>，<SPAN lang=EN-US>slockd</SPAN>很依赖<SPAN 
lang=EN-US>dns</SPAN>的好坏，因此给系统配置一个快速的<SPAN 
lang=EN-US>dns</SPAN>能大幅度提高处理速度。以下给出一个配置仅供参考：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">nameserver 202.96.128.68 </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">上述<SPAN lang=EN-US>dns</SPAN>服务器是广东电信的<SPAN 
lang=EN-US>DNS</SPAN>服务器，对于非广东朋友，请改为离你最近的<SPAN lang=EN-US>dns </SPAN>服务器<SPAN 
lang=EN-US>ip</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果可能的话，请配置一个简单的<SPAN lang=EN-US>bind9</SPAN>，成为本地的<SPAN 
lang=EN-US>dns cache server</SPAN>，可以获得最高性能。这里略过这一步骤，但您必须确保<SPAN 
lang=EN-US>dns</SPAN>的配置是正确并且可靠的，否则<SPAN 
lang=EN-US>slockd</SPAN>将不能工作！</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=slockd_test></A><B><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">启动<SPAN 
lang=EN-US>/</SPAN>测试</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">执行：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/usr/local/slockd/slockd-init start</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">此时<SPAN lang=EN-US>slockd</SPAN>将启动，并进入非<SPAN 
lang=EN-US>daemon</SPAN>方式的监听模式，接受来自<SPAN 
lang=EN-US>10030</SPAN>端口的请求，命令行下将显示如下调试信息：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Starting 
spam locker daemon: slockd</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">starting 
child 2908</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">starting 
child 2909</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2908]: Loading APF::Plugin::localctrl</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2909]: Loading APF::Plugin::localctrl</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2908]: Loading APF::Plugin::anvil</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2908]: Loading APF::Plugin::fqdn</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2909]: Loading APF::Plugin::anvil</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2908]: Loading APF::Plugin::dnsbl</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2909]: Loading APF::Plugin::fqdn</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2909]: Loading APF::Plugin::dnsbl</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2908]: Loading APF::Plugin::hostname</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">08-01 
12:34:40 [2909]: Loading APF::Plugin::hostname</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">打开另一个<SPAN lang=EN-US>ssh/</SPAN>终端窗口，进入<SPAN 
lang=EN-US>/usr/local/slockd/tools </SPAN>目录，输入：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">perl 
policy_sig -h localhost -p 10030 --helo FOOBAR \</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">--ip 
192.168.0.1 --from test@foo.com --to test@bar.com</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">此时，程序应该返回如下错误信息：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">action=504 &lt;FOOBAR&gt;: rejected, see 
http://bl.extmail.org/cgi/why?fqdn </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">这表示<SPAN lang=EN-US>slockd</SPAN>初步的正常工作了。<SPAN 
lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">后台方式运行<SPAN 
lang=EN-US>slockd</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">调试正确后，必须将<SPAN lang=EN-US>slockd</SPAN>配置成后台服务进程（<SPAN 
lang=EN-US>Daemon Process</SPAN>）。<SPAN lang=EN-US>vi 
/usr/local/slockd/config/main.cf </SPAN>将如下两个配置的注释去掉：<SPAN lang=EN-US> 
</SPAN></SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"># uncomment 
the following line if you need to daemonize</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">setsid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">## 
logging</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">log_file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
/var/log/slockd.log</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后在运行<SPAN lang=EN-US>slockd</SPAN>的命令行窗口按<SPAN 
lang=EN-US>ctrl+c</SPAN>，关闭刚才运行的<SPAN 
lang=EN-US>slockd</SPAN>。或者在另一个命令行窗口输入如下命令以杀死<SPAN 
lang=EN-US>slockd</SPAN>进程：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">killall slockd </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后执行：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/usr/local/slockd/slockd-init start</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">自启动</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">输入如下的命令，将<SPAN 
lang=EN-US>slockd</SPAN>启动加入到系统里，这样下一次服务器重新启动，就可以自动执行<SPAN 
lang=EN-US>slockd</SPAN>了。</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">echo 
"/usr/local/slockd/slockd-init start" &gt;&gt; 
/etc/rc.d/rc.local</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=slockd_mta></A><B><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">配置<SPAN 
lang=EN-US>Postfix</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">slockd</SPAN><SPAN 
style="FONT-FAMILY: 宋体">调试正常后，必须配置<SPAN lang=EN-US>postfix</SPAN>以使其打开对<SPAN 
lang=EN-US>slockd</SPAN>的支持，编辑<SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US>/etc/postfix/main.cf</SPAN></SPAN><SPAN 
style="FONT-FAMILY: 宋体"><SPAN 
lang=EN-US> (vi /etc/postfix/main.cf</SPAN></SPAN>)，将<SPAN lang=EN-US> check_policy_service 
inet:127.0.0.1:10030 </SPAN>这一行记录增加到<SPAN 
lang=EN-US>smtpd_recipient_restrictions </SPAN>里，例如：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">smtpd_recipient_restrictions 
=</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
permit_mynetworks,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
permit_sasl_authenticated,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
reject_non_fqdn_hostname,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
reject_non_fqdn_sender,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
reject_non_fqdn_recipient,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
reject_unauth_destination,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
reject_unauth_pipelining,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
reject_invalid_hostname,</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&nbsp; 
<SPAN style="COLOR: blue">check_policy_service 
inet:127.0.0.1:10030</SPAN></SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">最后，重新启动<SPAN lang=EN-US>postfix</SPAN>以使配置生效</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/etc/init.d/postfix restart </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意事项：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">上述配置是将<SPAN 
lang=EN-US>slockd</SPAN>的查询放到最后，这也是进一步提高资源利用律的办法，因为有部分功能<SPAN 
lang=EN-US>postfix</SPAN>已实现了，所以就先由<SPAN 
lang=EN-US>postfix</SPAN>检测，如果检测不到再由<SPAN lang=EN-US>slockd</SPAN>完成。</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=last_test></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">最终测试</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">现在通过简单的<SPAN 
lang=EN-US>email</SPAN>收发来确认系统是否正常。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">发送测试邮件</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">输入以下命令，通过<SPAN lang=EN-US>telnet</SPAN>方式给<SPAN 
lang=EN-US>test@extmail.org</SPAN>发送一封测试信件</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">telnet localhost 
25</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Trying 
127.0.0.1...</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connected 
to localhost.localdomain (127.0.0.1).</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Escape 
character is '^]'.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">220 
mail.extmail.org ESMTP Postfix - by extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">helo 
demo.extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 
mail.extmail.org</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">mail 
from:&lt;test@extmail.org&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 2.1.0 
Ok</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">rcpt 
to:&lt;test@extmail.org&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 2.1.5 
Ok</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">data</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">354 End 
data with .</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">Subject: Hello 
World</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">Hello World!</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">.</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">250 2.0.0 
Ok: queued as 3E47685269</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: 宋体">quit</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">221 2.0.0 
Bye</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Connection 
closed by foreign host.</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">此时通过另一个命令行窗口，观察<SPAN 
lang=EN-US>maillog</SPAN>，命令为：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">tail -f /var/log/maillog</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">将看到如下信息：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Aug 1 12:51:06 centos postfix/qmgr[3017]: 041718526B: 
from=, size=833, nrcpt=1 (queue active)<BR>Aug 1 12:51:06 centos 
postfix/smtpd[3032]: disconnect from centos[127.0.0.1]<BR>Aug 1 12:51:06 centos 
amavis[2890]: (02890-01) Passed CLEAN, [127.0.0.1] -&gt; , Message-ID: 
&lt;20060801165039.3E47685269@mail.extmail.org&gt;, mail_id: N8nxpoRn4Hlq, Hits: 
0.107, 11561 ms<BR>Aug 1 12:51:06 centos postfix/smtp[3043]: 3E47685269: to=, 
relay=127.0.0.1[127.0.0.1], delay=27, dsn=2.6.0, status=sent (250 2.6.0 Ok, 
id=02890-01, from MTA([127.0.0.1]:10025): 250 2.0.0 Ok: queued as 
041718526B)<BR>Aug 1 12:51:06 centos postfix/qmgr[3017]: 3E47685269: 
removed<BR>Aug 1 12:51:06 centos postfix/pipe[3035]: 041718526B: to=, 
relay=maildrop, delay=0, dsn=2.0.0, status=sent (delivered via maildrop 
service)<BR>Aug 1 12:51:06 centos postfix/qmgr[3017]: 041718526B: 
removed</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">上述日志表示邮件经过了<SPAN 
lang=EN-US>amavisd-new</SPAN>的扫描，并且已经通过<SPAN 
lang=EN-US>maildrop</SPAN>投递到用户的<SPAN lang=EN-US>maildir</SPAN>了。至此，整个<SPAN 
lang=EN-US>ExtMail Solution 
</SPAN>的安装配置已经基本告一段落。对于需要进行高级调整的朋友，请留意本文附录的备注。备注的内容将不断更新，敬请留意。</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=extra></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">补充配置</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">以下是补充的<SPAN lang=EN-US>ExtMail 
Solution</SPAN>有关文档，主要是为希望进一步了解<SPAN lang=EN-US>mail</SPAN>系统运行，并提高<SPAN 
lang=EN-US>extmail</SPAN>效能的朋友准备，对于初学者而言，建议要先打好基础再进行测试。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=#extra_fcgi></A><B><SPAN style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">增加<SPAN 
lang=EN-US>FCGI</SPAN>支持</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">为<SPAN lang=EN-US>extmail</SPAN>增加<SPAN 
lang=EN-US>FCGI</SPAN>的支持，主要是为了获得优异的<SPAN lang=EN-US>web</SPAN>效能，克服<SPAN 
lang=EN-US>CGI</SPAN>不能应付大量访问及低效率的缺陷。根据我们的测试，<SPAN 
lang=EN-US>CGI</SPAN>模式下的页面效率只有<SPAN lang=EN-US>FCGI</SPAN>下的<SPAN 
lang=EN-US>1/10~1/100</SPAN>，因此建议有条件的用户还是使用<SPAN lang=EN-US>FCGI</SPAN>。日后<SPAN 
lang=EN-US>ExtMail Solution</SPAN>的<SPAN lang=EN-US>web CGI</SPAN>程序将全部都支持<SPAN 
lang=EN-US>FCGI</SPAN>。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">安装<SPAN lang=EN-US>mod_fastcgi</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">mod_fastcgi </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是针对<SPAN lang=EN-US>Apache Web</SPAN>服务器的<SPAN 
lang=EN-US>FCGI</SPAN>支持模块，下载地址： <SPAN lang=EN-US><A 
href="http://www.fastcgi.com/dist/mod_fastcgi-2.4.2.tar.gz">http://www.fastcgi.com/dist/mod_fastcgi-2.4.2.tar.gz</A> 
</SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编译指令：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="COLOR: red; FONT-FAMILY: 宋体">注意，安装前，需要确保已经安装了<SPAN 
lang=EN-US>httpd-devel</SPAN>软件包。</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">wget 
http://www.fastcgi.com/dist/mod_fastcgi-2.4.2.tar.gz</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">tar xfz 
mod_fastcgi-2.4.2.tar.gz</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cd 
mod_fastcgi-2.4.2</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">cp 
Makefile.AP2 Makefile</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">make 
top_dir=/etc/httpd install</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">安装<SPAN lang=EN-US>perl-FCGI</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">除了<SPAN lang=EN-US>Apache</SPAN>需要<SPAN 
lang=EN-US>FCGI</SPAN>的支持外，<SPAN lang=EN-US>extmail</SPAN>也需要相应的<SPAN 
lang=EN-US>perl-FCGI</SPAN>模块。用以下命令安装：<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; color: #FF0000;" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">## rpm -ivh RPMS/perl-FCGI-0.67-2hzq.i386.rpm</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; color: #FF0000; font-family: &quot;Times New Roman&quot;, Times, serif;" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">yum -y install perl-FCGI</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">接下来将配置<SPAN lang=EN-US>Apache</SPAN>，将如下的信息增加到<SPAN 
lang=EN-US>/etc/httpd/conf/vhost_extmail.conf</SPAN>的虚拟主机配置之后：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">LoadModule 
fastcgi_module modules/mod_fastcgi.so</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体"></SPAN>&nbsp;</P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&lt;Ifmodule 
mod_fastcgi.c&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">FastCgiExternalServer 
/usr/bin/dispatch.fcgi -host 127.0.0.1:8888</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&lt;/Ifmodule&gt;</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">同时，去掉如下行：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">ScriptAlias /extmail/cgi/ /var/www/extsuite/extmail/cgi/ 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">改为：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">Alias 
/extmail/cgi/ /usr/bin/dispatch.fcgi/</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&lt;Location 
"/extmail/cgi"&gt;</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">SetHandler 
fastcgi-script</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">&lt;/Location&gt;</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">然后编辑<SPAN 
lang=EN-US>/var/www/extsuite/extmail/dispatch-init</SPAN>文件，修改如下：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">BASE=/var/www/extsuite/extmail </SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">最后启动<SPAN lang=EN-US>fastcgi server</SPAN>：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/var/www/extsuite/extmail/dispatch-init start 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">如果没有意外将启动<SPAN lang=EN-US>10</SPAN>个<SPAN 
lang=EN-US>dispatch.fcgi</SPAN>守护进程，可以通过以下命令将启动命令加到<SPAN 
lang=EN-US>rc.local</SPAN>中，实现自启动：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">echo 
"/var/www/extsuite/extmail/dispatch-init start" &gt;&gt; 
/etc/rc.d/rc.local</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">修改 /var/www/extsuite/extmail/webmail.cf 配置后要重启 <SPAN lang=EN-US>fastcgi server: <SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">/var/www/extsuite/extmail/dispatch-init restart</SPAN></SPAN></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><A 
name=extra_courier-imap></A><B><SPAN 
style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">编译<SPAN lang=EN-US>Courier-IMAP 
  SRPM</SPAN>包</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">需要自己重新编译<SPAN 
lang=EN-US>Courier-IMAP</SPAN>的朋友，可以通过如下方式完成。</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">下载软件包</SPAN></B></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">wget <A 
href="http://jaist.dl.sourceforge.net/sourceforge/courier/courier-imap-4.1.0.tar.bz2">http://jaist.dl.sourceforge.net/sourceforge/courier/courier-imap-4.1.0.tar.bz2</A></SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">制作<SPAN lang=EN-US>RPM</SPAN>包</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">由于<SPAN lang=EN-US>courier-imap</SPAN>需要非<SPAN 
lang=EN-US>root</SPAN>帐户进行编译，因此必须<SPAN lang=EN-US>su</SPAN>到<SPAN 
lang=EN-US>sysadmin</SPAN>这个非<SPAN lang=EN-US>root</SPAN>用户，然后输入如下指令：</SPAN></P>
<DIV 
style="BORDER-RIGHT: #cccccc 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: #cccccc 1pt solid; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: #cccccc 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: #cccccc 1pt solid">
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm/SOURCES</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm/SPECS</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm/BUILD</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm/SRPMS</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm/RPMS</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">mkdir 
$HOME/rpm/RPMS/x86_64</SPAN></P>
<P class=MsoNormal 
style="BORDER-RIGHT: medium none; PADDING-RIGHT: 0cm; BORDER-TOP: medium none; PADDING-LEFT: 0cm; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; PADDING-TOP: 0cm; BORDER-BOTTOM: medium none; TEXT-ALIGN: left" 
align=left><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: 宋体">echo 
"%_topdir $HOME/rpm" &gt;&gt; $HOME/.rpmmacros</SPAN></P></DIV>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">解开<SPAN 
lang=EN-US>courier-imap-4.1.0.tar.bz2</SPAN>，取出<SPAN 
lang=EN-US>courier-imap.spec</SPAN>文件，复制到<SPAN 
lang=EN-US>$HOME/rpm/SPECS</SPAN>里，然后再复制<SPAN 
lang=EN-US>courier-imap-4.1.0.tar.bz2</SPAN>到<SPAN 
lang=EN-US>$HOME/rpm/SOURCE</SPAN>里</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN 
style="FONT-FAMILY: 宋体">注意事项：</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">此版本的<SPAN lang=EN-US>courier-imap</SPAN>需要<SPAN 
lang=EN-US>openldap</SPAN>等相关包，所以编译前务必安装好<SPAN 
lang=EN-US>openldap-devel</SPAN>等包</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">rpmbuild --ba $HOME/rpm/SPECS/courier-imap.spec 
</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">编译完毕，在<SPAN 
lang=EN-US>$HOME/rpm/RPMS/x86_64/</SPAN>下就有所有编译成功的<SPAN 
lang=EN-US>rpm</SPAN>包了！</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=end></A><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">结束语</SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">通过此文档，读者应该能够较容易地架设一个功能较齐全的电子邮件系统。当使用一段时间后，用户将发现这个系统还有很多比较粗糙的地方，不尽人意。日后，本文档将继续保持更新，逐步将一些高级的设置方法公布出来，争取<SPAN 
lang=EN-US>ExtMail Solution</SPAN>更加完整，力求完美。<SPAN lang=EN-US> </SPAN></SPAN></P>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=bugs></A><B><SPAN style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">已知<SPAN 
lang=EN-US>Bugs</SPAN></SPAN></B></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><SPAN 
style="FONT-FAMILY: 宋体">整个<SPAN lang=EN-US>ExtMail Solution</SPAN>尽力将<SPAN 
lang=EN-US>Opensource</SPAN>软件的优点发挥到极至，但免不了还是有<SPAN 
lang=EN-US>bug</SPAN>。以下是几个已知的问题：</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">WebMail</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">删除<SPAN lang=EN-US>/</SPAN>新增邮件时左帧数字不会变更<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">不能处理少量违反<SPAN lang=EN-US>RFC</SPAN>的邮件<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">在某些版本<SPAN lang=EN-US>Apache</SPAN>下偶尔出现会话失效问题<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">还不支持<SPAN lang=EN-US>IMAP</SPAN>创建的中文子目录<SPAN 
  lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Amavisd-new</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">退信模板还是英文的<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">产生的汇报信息不够友好<SPAN lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Postfix</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">本版本还不支持退信模板定制<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">版本不是最新版<SPAN lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="TEXT-ALIGN: left" align=left><B><SPAN lang=EN-US 
style="FONT-FAMILY: 宋体">Spam Locker</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">错误识别一些配置异常的<SPAN lang=EN-US>mail</SPAN>服务器<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">与内容过滤器结合不够紧密<SPAN lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">hostname</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">模块易造成较多误伤<SPAN lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal style="BACKGROUND: #cccccc; TEXT-ALIGN: left" align=left><A 
name=todo></A><B><SPAN lang=EN-US 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">TODO </SPAN></B><B><SPAN 
style="FONT-SIZE: 13.5pt; FONT-FAMILY: 宋体">列表</SPAN></B></P>
<UL type=disc>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">支持<SPAN lang=EN-US>SMTP </SPAN>及<SPAN lang=EN-US> 
  POP3/IMAP</SPAN>的<SPAN lang=EN-US>TLS/SSL</SPAN>加密<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">HTTP</SPAN><SPAN style="FONT-FAMILY: 宋体">及<SPAN 
  lang=EN-US>SMTP/POP3</SPAN>等<SPAN lang=EN-US>CA</SPAN>证书的配置<SPAN lang=EN-US> 
  </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">更精细的<SPAN lang=EN-US>Anti-Spam</SPAN>策略及关键字过滤<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN 
  style="FONT-FAMILY: 宋体">系统安全配置（基于<SPAN lang=EN-US>iptables</SPAN>）<SPAN 
  lang=EN-US> </SPAN></SPAN>
  <LI class=MsoNormal style="TEXT-ALIGN: left"><SPAN lang=EN-US 
  style="FONT-FAMILY: 宋体">BSD</SPAN><SPAN style="FONT-FAMILY: 宋体">平台的<SPAN 
  lang=EN-US>ExtMail Solution</SPAN>文档<SPAN lang=EN-US> </SPAN></SPAN></LI></UL>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P></DIV></BODY></HTML>
