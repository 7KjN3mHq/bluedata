groupadd mysql
useradd -g mysql -d /usr/local/mysql -s /sbin/nologin mysql

tar zxvf mysql-5.0.33.tar.gz
cd mysql-5.0.33
./configure \
--prefix=/usr/local/mysql \
--sysconfdir=/usr/local/mysql/etc \
--with-mysqld-user=mysql \
--with-extra-charsets=all \
--with-charset=gbk
make
make install
cd ..
mkdir /usr/local/mysql/etc
cp -f /usr/local/mysql/share/mysql/my-huge.cnf /usr/local/mysql/etc/my.cnf
chown -R mysql:mysql /usr/local/mysql


## configuration
mkdir /var/run/mysqld
chown -R mysql:mysql /var/run/mysqld
mkdir /var/log/mysqld
chown -R mysql:mysql /var/log/mysqld
vi /usr/local/mysql/etc/my.cnf
[client]
port            = 3306
socket          = /var/run/mysqld/mysql.sock
[mysqld]
port            = 3306
datadir         = /data
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysql.sock
log-error       = /var/log/mysqld/err.log
skip-innodb
skip-bdb
skip-locking
key_buffer = 768M
max_allowed_packet = 1M
table_cache = 512
sort_buffer_size = 2M
read_buffer_size = 2M
read_rnd_buffer_size = 8M
myisam_sort_buffer_size = 512M
thread_cache_size = 8
query_cache_size = 512M
max_connections = 1024
wait_timeout = 30
interactive_timeout = 30
long_query_time = 1
log_slow_queries = /var/log/mysqld/slow_queries.log
ft_min_word_len = 2
skip-name-resolve
thread_concurrency = 8

#log-bin=mysql-bin
#server-id       = 1


cp -f /usr/local/mysql/share/mysql/mysql.server /etc/init.d/mysqld
chmod +x /etc/init.d/mysqld
chkconfig --add mysqld

/usr/local/mysql/bin/mysql_install_db
chown -R mysql:mysql /data
chmod -R 1770 /data
service mysqld start

/usr/local/mysql/bin/mysqladmin -u root password 'root'